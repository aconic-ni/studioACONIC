(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3923],{12914:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var t=a(95155),r=a(12115),i=a(20063),c=a(54901),n=a(35434),d=a(92033),l=a(19201),o=a(62593),u=a(94979),m=a(86948),x=a(3998),h=a(15894),p=a(14585),f=a(19708);function j(){let{user:e,loading:s}=(0,c.A)(),a=(0,i.useRouter)(),{toast:j}=(0,h.dj)(),[N,g]=(0,r.useState)("idle");(0,r.useEffect)(()=>{if(!s&&e){if("admin"===e.role||e.hasReportsAccess)return void a.push("/thereporter");(async()=>{let s=(0,f.H9)(p.db,"reportAccessRequests",e.uid);(await (0,f.x7)(s)).exists()&&g("requested")})()}},[e,s,a]);let y=async()=>{if(e){g("loading");try{let s=(0,f.H9)(p.db,"reportAccessRequests",e.uid);await (0,f.BN)(s,{userId:e.uid,userEmail:e.email,status:"pending",requestedAt:(0,f.O5)()}),g("requested"),j({title:"Solicitud Enviada",description:"Tu solicitud ha sido enviada al administrador para su aprobaci\xf3n."})}catch(e){console.error("Error sending access request:",e),j({title:"Error",description:"No se pudo enviar la solicitud. Int\xe9ntalo de nuevo.",variant:"destructive"}),g("idle")}}};return s||!e||e.hasReportsAccess?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"py-2 md:py-5 flex items-center justify-center",children:(0,t.jsxs)(m.Zp,{className:"w-full max-w-xl mx-auto custom-shadow text-center",children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,t.jsx)(l.A,{className:"h-12 w-12 text-primary",strokeWidth:1.5}),(0,t.jsx)(m.ZB,{className:"text-3xl font-bold",children:"Acceso Restringido"})]})}),(0,t.jsx)(m.Wu,{className:"space-y-4",children:"requested"===N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)("p",{className:"font-semibold text-foreground",children:"Solicitud Enviada"})]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Tu solicitud de acceso a ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:"Customs Reports"})," est\xe1 pendiente de aprobaci\xf3n.",(0,t.jsx)("br",{}),"Recibir\xe1s una notificaci\xf3n cuando el administrador la haya procesado."]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Para acceder a ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:"Customs Reports"}),", necesitas la aprobaci\xf3n de un administrador."]}),(0,t.jsxs)(x.$,{onClick:y,disabled:"loading"===N,children:["loading"===N?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"loading"===N?"Enviando...":"Solicitar Acceso"]})]})})]})})})}},20063:(e,s,a)=>{"use strict";var t=a(47260);a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},62593:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},94880:(e,s,a)=>{Promise.resolve().then(a.bind(a,12914))},94979:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])}},e=>{e.O(0,[2992,7138,4865,2130,3744,5479,5171,8441,1255,7358],()=>e(e.s=94880)),_N_E=e.O()}]);