(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{10489:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s(12115),r=s(97602),n=s(95155),i=a.forwardRef((e,t)=>(0,n.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},32751:(e,t,s)=>{Promise.resolve().then(s.bind(s,75619))},36654:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},51834:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>f,HM:()=>d,L3:()=>x,c7:()=>m,lG:()=>o,rr:()=>p});var a=s(95155),r=s(12115),n=s(89511),i=s(64269);let o=n.bL;n.l9;let l=n.ZL,d=n.bm,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsx)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(0,a.jsx)("span",{className:"sr-only",children:"Close"})})]})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});x.displayName=n.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=n.VY.displayName},65142:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(95155),r=s(12115),n=s(64269);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","aria-[invalid=true]:border-destructive aria-[invalid=true]:ring-destructive",s),ref:t,...i})});i.displayName="Input"},75619:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(95155),r=s(12115),n=s(20063),i=s(92033),o=s(59253),l=s(14585),d=s(19708),c=s(3998),u=s(65142),m=s(76444),f=s(51834),x=s(15894),p=s(26615),g=s(47974),h=s(14294);let y=(0,h.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),b=(0,h.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var v=s(36654),N=s(15239);function j(e){let{isOpen:t,onClose:s,onLoginSuccess:n,targetSystem:i}=e,[h,j]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[C,E]=(0,r.useState)(!1),[A,S]=(0,r.useState)(null),[O,R]=(0,r.useState)(!1),{toast:L}=(0,x.dj)(),P=async()=>{let e=(await (0,o.x9)(l.j2,h,w)).user;if("reporter"===i){var t;let s=(0,d.H9)(l.db,"users",e.uid),a=await (0,d.x7)(s);if(a.exists()&&(null==(t=a.data())?void 0:t.hasReportsAccess))n();else{let t=(0,d.H9)(l.db,"reportAccessRequests",e.uid);(await (0,d.x7)(t)).exists()||(await (0,d.BN)(t,{userId:e.uid,userEmail:e.email,status:"pending",requestedAt:(0,d.O5)()}),L({title:"Solicitud Enviada",description:"Tu solicitud de acceso ha sido enviada al administrador."})),n()}}else n()},I=async e=>{if(e.preventDefault(),S(null),R(!0),!h||!w){S("Por favor, ingrese correo y contrase\xf1a."),R(!1);return}try{await P(),L({title:"Inicio de sesi\xf3n exitoso",description:"Bienvenido."}),s()}catch(t){console.error("Firebase Auth Error:",t);let e="Error al iniciar sesi\xf3n. Int\xe9ntelo de nuevo.";"auth/user-not-found"===t.code||"auth/wrong-password"===t.code||"auth/invalid-credential"===t.code?e="Correo o contrase\xf1a incorrectos.":"auth/invalid-email"===t.code&&(e="El formato del correo electr\xf3nico no es v\xe1lido."),S(e),L({title:"Error de inicio de sesi\xf3n",description:e,variant:"destructive"})}finally{R(!1)}};return t?(0,a.jsx)(f.lG,{open:t,onOpenChange:e=>!e&&s(),children:(0,a.jsxs)(f.Cf,{className:"sm:max-w-md glass-effect text-foreground border-border/30",children:[(0,a.jsxs)(f.c7,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N.default,{src:"/imagenes/LOGOAPP.svg",alt:"App Logo",width:32,height:32,className:"h-8 w-8"}),(0,a.jsxs)("h1",{className:"font-montserrat text-2xl md:text-3xl text-foreground leading-none",children:[(0,a.jsx)("span",{className:"font-semibold",children:"EX'"}),(0,a.jsx)("span",{className:"font-light",children:"OS"})]})]}),(0,a.jsx)("button",{onClick:s,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","aria-label":"Cerrar",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-muted-foreground"})})]}),(0,a.jsx)(f.rr,{className:"text-muted-foreground",children:"Ingrese sus credenciales para acceder al sistema."}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.J,{htmlFor:"email-login",className:"flex items-center text-sm font-medium text-foreground mb-1",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4 text-primary"}),"Correo Electr\xf3nico"]}),(0,a.jsx)(u.p,{id:"email-login",type:"email",value:h,onChange:e=>j(e.target.value),required:!0,className:"w-full px-4 py-3 text-foreground placeholder:text-muted-foreground border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"usuario@ejemplo.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.J,{htmlFor:"password-login",className:"flex items-center text-sm font-medium text-foreground mb-1",children:[(0,a.jsx)(y,{className:"mr-2 h-4 w-4 text-primary"}),"Contrase\xf1a"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.p,{id:"password-login",type:C?"text":"password",value:w,onChange:e=>k(e.target.value),required:!0,className:"w-full px-4 py-3 pr-10 text-foreground placeholder:text-muted-foreground border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"********"}),(0,a.jsx)("button",{type:"button",onClick:()=>E(!C),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground hover:text-foreground","aria-label":C?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:C?(0,a.jsx)(b,{className:"h-5 w-5"}):(0,a.jsx)(v.A,{className:"h-5 w-5"})})]})]}),A&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:A}),(0,a.jsx)(f.Es,{children:(0,a.jsx)(c.$,{type:"submit",className:"btn-primary text-primary-foreground px-8 py-3 rounded-md font-medium w-full",disabled:O,children:O?"Ingresando...":"Ingresar"})})]})]})}):null}var w=s(54901),k=s(39833);function C(){let{user:e,loading:t}=(0,w.A)(),s=(0,n.useRouter)(),[o,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(!t&&e){let t;t="supervisor"===e.role?"supervisor":"agente aduanero"===e.roleTitle?"agente":e.role||"gestor";let a=k.J[t];a?s.push(a.home):s.push("/examiner")}},[e,t,s]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center grid-bg",children:(0,a.jsx)(i.A,{className:"h-16 w-16 animate-spin text-white"})}):e?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center grid-bg",children:[(0,a.jsx)(i.A,{className:"h-16 w-16 animate-spin text-white"}),(0,a.jsx)("p",{className:"ml-4 text-white",children:"Redirigiendo..."})]}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col justify-between grid-bg text-white p-4",children:[(0,a.jsxs)("main",{className:"flex flex-col items-center justify-center text-center gap-6 p-8 flex-grow",children:[(0,a.jsx)(N.default,{src:"/imagenes/LOGOAPPwhite.svg",alt:"App Logo",width:200,height:200,className:"h-48 w-48 text-primary logo-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h1",{className:"font-montserrat text-8xl text-white leading-none",children:[(0,a.jsx)("span",{className:"font-bold",children:"EX'"}),(0,a.jsx)("span",{className:"font-light",children:"OS"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300 tracking-wider",children:"Examiner Operative System"})]}),(0,a.jsx)(c.$,{onClick:()=>l(!0),variant:"secondary",className:"mt-8 px-8 py-6 text-lg",children:"Iniciar Sesi\xf3n"})]}),(0,a.jsx)(j,{isOpen:o,onClose:()=>{l(!1)},onLoginSuccess:()=>{l(!1)},targetSystem:"examiner"}),(0,a.jsx)("footer",{className:"text-center text-sm text-blue-300 py-4",children:"Stvaer \xa9 2025 for ACONIC"})]})}},76444:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s(95155),r=s(12115),n=s(10489),i=s(83101),o=s(64269);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,o.cn)(l(),s),...r})});d.displayName=n.b.displayName}},e=>{e.O(0,[2992,7138,4865,9255,5479,8441,1255,7358],()=>e(e.s=32751)),_N_E=e.O()}]);