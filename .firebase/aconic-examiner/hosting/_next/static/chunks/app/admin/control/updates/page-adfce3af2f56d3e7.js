(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6413],{13406:(e,a,s)=>{"use strict";s.d(a,{Xi:()=>c,av:()=>l,j7:()=>d,tU:()=>n});var t=s(95155),r=s(12115),i=s(25667),o=s(64269);let n=i.bL,d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.B8,{ref:a,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});d.displayName=i.B8.displayName;let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.l9,{ref:a,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=i.l9.displayName;let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.UC,{ref:a,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});l.displayName=i.UC.displayName},25667:(e,a,s)=>{"use strict";s.d(a,{B8:()=>M,UC:()=>P,bL:()=>E,l9:()=>S});var t=s(12115),r=s(92556),i=s(3468),o=s(72431),n=s(76842),d=s(97602),c=s(66218),l=s(23558),u=s(68946),h=s(95155),f="Tabs",[m,g]=(0,i.A)(f,[o.RG]),p=(0,o.RG)(),[x,j]=m(f),b=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:t,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:n,activationMode:f="automatic",...m}=e,g=(0,c.jH)(n),[p,j]=(0,l.i)({prop:t,onChange:r,defaultProp:i});return(0,h.jsx)(x,{scope:s,baseId:(0,u.B)(),value:p,onValueChange:j,orientation:o,dir:g,activationMode:f,children:(0,h.jsx)(d.sG.div,{dir:g,"data-orientation":o,...m,ref:a})})});b.displayName=f;var w="TabsList",v=t.forwardRef((e,a)=>{let{__scopeTabs:s,loop:t=!0,...r}=e,i=j(w,s),n=p(s);return(0,h.jsx)(o.bL,{asChild:!0,...n,orientation:i.orientation,dir:i.dir,loop:t,children:(0,h.jsx)(d.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:a})})});v.displayName=w;var A="TabsTrigger",y=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:t,disabled:i=!1,...n}=e,c=j(A,s),l=p(s),u=k(c.baseId,t),f=T(c.baseId,t),m=t===c.value;return(0,h.jsx)(o.q7,{asChild:!0,...l,focusable:!i,active:m,children:(0,h.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...n,ref:a,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(t)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(t)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;m||i||!e||c.onValueChange(t)})})})});y.displayName=A;var N="TabsContent",C=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,forceMount:i,children:o,...c}=e,l=j(N,s),u=k(l.baseId,r),f=T(l.baseId,r),m=r===l.value,g=t.useRef(m);return t.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(n.C,{present:i||m,children:s=>{let{present:t}=s;return(0,h.jsx)(d.sG.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:f,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&o})}})});function k(e,a){return"".concat(e,"-trigger-").concat(a)}function T(e,a){return"".concat(e,"-content-").concat(a)}C.displayName=N;var E=b,M=v,S=y,P=C},36204:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(14294).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},59652:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(95155),r=s(12115),i=s(54901),o=s(35434),n=s(86948),d=s(92033),c=s(18844),l=s(36204),u=s(14585),h=s(19708),f=s(15894),m=s(3998),g=s(52619),p=s.n(g),x=s(13406);function j(){let{toast:e}=(0,f.dj)(),[a,s]=(0,r.useState)({casesWithDate:0,worksheetsToUpdate:0}),[i,o]=(0,r.useState)(!0),[l,g]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{o(!0);try{let e=(0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("entregadoAforoAt","!=",null)),a=(await (0,h.GG)(e)).docs.map(e=>({id:e.id,...e.data()})),t=0;for(let e of a)if(e.worksheetId){let a=(0,h.H9)(u.db,"worksheets",e.worksheetId),s=await (0,h.x7)(a);s.exists()&&!s.data().entregadoAforoAt&&t++}s({casesWithDate:a.length,worksheetsToUpdate:t})}catch(a){console.error("Error fetching entregadoAforoAt stats:",a),e({title:"Error",description:"No se pudieron cargar las estad\xedsticas de migraci\xf3n.",variant:"destructive"})}finally{o(!1)}},[e]);(0,r.useEffect)(()=>{p()},[p]);let x=async()=>{g(!0),e({title:"Migraci\xf3n iniciada",description:'Transfiriendo fechas de "Entregado a Aforo". Esto puede tardar unos minutos...'});try{let a=(0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("entregadoAforoAt","!=",null)),s=(await (0,h.GG)(a)).docs.map(e=>e.data()),t=0,r=(0,h.wP)(u.db);for(let e of s)if(e.worksheetId&&e.entregadoAforoAt){let a=(0,h.H9)(u.db,"worksheets",e.worksheetId),s=await (0,h.x7)(a);s.exists()&&!s.data().entregadoAforoAt&&(r.update(a,{entregadoAforoAt:e.entregadoAforoAt}),t++)}t>0?(await r.commit(),e({title:"Migraci\xf3n Completa",description:"".concat(t,' fechas de "Entregado a Aforo" han sido transferidas.')})):e({title:"Sin cambios necesarios",description:"Todos los datos de fecha de entrega ya est\xe1n sincronizados."})}catch(a){console.error("Error during entregadoAforoAt migration:",a),e({title:"Error en Migraci\xf3n",description:"Ocurri\xf3 un error al migrar las fechas.",variant:"destructive"})}finally{g(!1),p()}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:'Migrador de Fechas "Entregado a Aforo"'}),(0,t.jsx)(n.BT,{children:"Esta herramienta transfiere la fecha `entregadoAforoAt` desde `AforoCases` a los documentos `Worksheet` correspondientes."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[i?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Cargando estad\xedsticas..."]}):(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[(0,t.jsxs)("p",{children:["Casos con fecha de entrega: ",(0,t.jsx)("span",{className:"font-bold",children:a.casesWithDate})]}),(0,t.jsxs)("p",{children:["Hojas de trabajo a actualizar: ",(0,t.jsx)("span",{className:"font-bold text-amber-600",children:a.worksheetsToUpdate})]})]}),(0,t.jsxs)(m.$,{onClick:x,disabled:i||l||0===a.worksheetsToUpdate,children:[l?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),l?"Migrando Fechas...":"Ejecutar Migraci\xf3n de Fechas"]})]})]})}function b(){let{toast:e}=(0,f.dj)(),[a,s]=(0,r.useState)({casesWithData:0,worksheetsToUpdate:0}),[i,o]=(0,r.useState)(!0),[l,g]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{o(!0);try{let e=(0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("totalPosiciones",">",0)),a=(await (0,h.GG)(e)).docs.map(e=>e.data()),t=0;for(let e of a)if(e.worksheetId){let a=(0,h.H9)(u.db,"worksheets/".concat(e.worksheetId,"/aforo/metadata")),s=await (0,h.x7)(a);(!s.exists()||!s.data().totalPosiciones)&&t++}s({casesWithData:a.length,worksheetsToUpdate:t})}catch(a){console.error("Error fetching totalPosiciones stats:",a),e({title:"Error",description:"No se pudieron cargar las estad\xedsticas de migraci\xf3n de posiciones.",variant:"destructive"})}finally{o(!1)}},[e]);(0,r.useEffect)(()=>{p()},[p]);let x=async()=>{g(!0),e({title:"Migraci\xf3n iniciada",description:"Transfiriendo el total de posiciones..."});try{let a=(0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("totalPosiciones",">",0)),s=(await (0,h.GG)(a)).docs.map(e=>e.data()),t=(0,h.wP)(u.db),r=0;for(let e of s)if(e.worksheetId&&e.totalPosiciones){let a=(0,h.H9)(u.db,"worksheets",e.worksheetId,"aforo","metadata"),s=await (0,h.x7)(a);(!s.exists()||!s.data().totalPosiciones)&&(t.set(a,{totalPosiciones:e.totalPosiciones},{merge:!0}),r++)}r>0?(await t.commit(),e({title:"Migraci\xf3n Completa",description:"".concat(r," registros de 'totalPosiciones' han sido migrados.")})):e({title:"Sin cambios necesarios",description:"Todos los datos de posiciones ya est\xe1n sincronizados."})}catch(a){console.error("Error during totalPosiciones migration:",a),e({title:"Error en Migraci\xf3n",description:"Ocurri\xf3 un error al migrar las posiciones.",variant:"destructive"})}finally{g(!1),p()}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Migrador de Total de Posiciones"}),(0,t.jsx)(n.BT,{children:"Esta herramienta transfiere el valor de `totalPosiciones` desde `AforoCases` a la subcolecci\xf3n `aforo/metadata` en `Worksheets`."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[i?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Cargando estad\xedsticas..."]}):(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[(0,t.jsxs)("p",{children:["Casos con Total de Posiciones: ",(0,t.jsx)("span",{className:"font-bold",children:a.casesWithData})]}),(0,t.jsxs)("p",{children:["Registros de metadata a actualizar: ",(0,t.jsx)("span",{className:"font-bold text-amber-600",children:a.worksheetsToUpdate})]})]}),(0,t.jsxs)(m.$,{onClick:x,disabled:i||l||0===a.worksheetsToUpdate,children:[l?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),l?"Migrando Posiciones...":"Ejecutar Migraci\xf3n de Posiciones"]})]})]})}function w(){let{toast:e}=(0,f.dj)(),[a,s]=(0,r.useState)({total:0,missingType:0}),[i,o]=(0,r.useState)(!0),[l,g]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{o(!0);try{let e=(0,h.P)((0,h.rJ)(u.db,"AforoCases")),a=(await (0,h.GG)(e)).docs.map(e=>e.data()),t=a.filter(e=>!e.worksheetType).length;s({total:a.length,missingType:t})}catch(a){e({title:"Error",description:"No se pudieron cargar las estad\xedsticas de casos.",variant:"destructive"})}finally{o(!1)}},[e]);(0,r.useEffect)(()=>{p()},[p]);let x=async()=>{g(!0),e({title:"Sincronizaci\xf3n iniciada",description:"Buscando y actualizando casos. Esto puede tardar unos minutos..."});try{let a=(await (0,h.GG)((0,h.rJ)(u.db,"AforoCases"))).docs.filter(e=>!e.data().worksheetType);if(0===a.length){e({title:"Todo al d\xeda",description:"No se encontraron casos para actualizar."}),g(!1),p();return}let s=0,t=(0,h.wP)(u.db);for(let e of a){let a=e.data();if(a.worksheetId){let r=(0,h.H9)(u.db,"worksheets",a.worksheetId),i=await (0,h.x7)(r);i.exists()&&i.data().worksheetType&&(t.update(e.ref,{worksheetType:i.data().worksheetType}),s++)}}s>0?(await t.commit(),e({title:"Sincronizaci\xf3n Completa",description:"".concat(s," casos han sido actualizados con su tipo de hoja de trabajo.")})):e({title:"Sin cambios necesarios",description:"Aunque se encontraron casos sin tipo, no se pudieron asociar a una hoja de trabajo para actualizar."})}catch(a){console.error("Error during sync:",a),e({title:"Error en Sincronizaci\xf3n",description:"Ocurri\xf3 un error al actualizar los casos.",variant:"destructive"})}finally{g(!1),p()}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Sincronizador de Tipos de Hoja de Trabajo"}),(0,t.jsx)(n.BT,{children:"Esta herramienta asegura que todos los Casos de Aforo tengan el tipo de hoja de trabajo correcto (Ej: Hoja de Trabajo, Anexo 5)."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[i?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Cargando estad\xedsticas..."]}):(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[(0,t.jsxs)("p",{children:["Total de Casos de Aforo: ",(0,t.jsx)("span",{className:"font-bold",children:a.total})]}),(0,t.jsxs)("p",{children:["Casos sin tipo de hoja de trabajo: ",(0,t.jsx)("span",{className:"font-bold text-destructive",children:a.missingType})]})]}),(0,t.jsxs)(m.$,{onClick:x,disabled:i||l||0===a.missingType,children:[l?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),l?"Sincronizando...":"Sincronizar Datos Ahora"]})]})]})}function v(){let{toast:e}=(0,f.dj)(),[a,s]=(0,r.useState)({totalCases:0,casesToMigrate:0}),[i,o]=(0,r.useState)(!0),[l,g]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{o(!0);try{let e=(await (0,h.GG)((0,h.P)((0,h.rJ)(u.db,"AforoCases")))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.worksheetId),a=0,t=e.map(e=>e.worksheetId).filter(Boolean);if(t.length>0){let e=[];for(let a=0;a<t.length;a+=30){let s=t.slice(a,a+30),r=(0,h.P)((0,h.Cs)(u.db,"aforo"),(0,h._M)((0,h.Fs)(),"in",s.map(e=>"worksheets/".concat(e,"/aforo/metadata"))));e.push((0,h.GG)(r))}let s=await Promise.all(e),r=new Set;s.forEach(e=>{e.forEach(e=>{let a=e.ref.path.split("/");a.length>=2&&r.add(a[1])})}),a=t.filter(e=>!r.has(e)).length}s({totalCases:e.length,casesToMigrate:a})}catch(a){console.error("Error fetching migration stats:",a),e({title:"Error",description:"No se pudieron cargar las estad\xedsticas de migraci\xf3n.",variant:"destructive"})}finally{o(!1)}},[e]);(0,r.useEffect)(()=>{p()},[p]);let x=async()=>{g(!0),e({title:"Migraci\xf3n iniciada",description:"Transfiriendo datos de aforo. Esto puede tardar unos minutos..."});try{let r=(0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("worksheetId","!=",null)),i=(await (0,h.GG)(r)).docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.worksheetId),o=0;for(let e of i)if(e.worksheetId){let r=(0,h.wP)(u.db),i=(0,h.H9)(u.db,"worksheets/".concat(e.worksheetId,"/aforo/metadata"));if(!(await (0,h.x7)(i)).exists()){var a,s,t;let n={aforador:e.aforador||null,aforadorAssignedAt:e.assignmentDate||null,aforadorAssignedBy:"Migrado del Sistema",aforadorStatus:e.aforadorStatus||null,aforadorStatusLastUpdate:e.aforadorStatusLastUpdate||null,aforadorComment:e.aforadorComment||null,revisor:e.revisorAsignado||null,revisorAssignedAt:(null==(a=e.revisorAsignadoLastUpdate)?void 0:a.at)||null,revisorAssignedBy:(null==(s=e.revisorAsignadoLastUpdate)?void 0:s.by)||"Migrado del Sistema",revisorStatus:e.revisorStatus||null,revisorStatusLastUpdate:e.revisorStatusLastUpdate||null,digitador:e.digitadorAsignado||null,digitadorAssignedAt:e.digitadorAsignadoAt||null,digitadorAssignedBy:(null==(t=e.digitadorAsignadoLastUpdate)?void 0:t.by)||"Migrado del Sistema",digitadorStatus:e.digitacionStatus||null,digitadorStatusLastUpdate:e.digitacionStatusLastUpdate||null,declaracionAduanera:e.declaracionAduanera||null,entregadoAforoAt:e.entregadoAforoAt||null};r.set(i,n,{merge:!0}),await r.commit(),o++}}o>0?e({title:"Migraci\xf3n Completa",description:"".concat(o," registros de aforo han sido migrados a sus hojas de trabajo.")}):e({title:"Sin cambios necesarios",description:"Todos los datos de aforo aplicables ya est\xe1n migrados."})}catch(a){console.error("Error during migration:",a),e({title:"Error en Migraci\xf3n",description:"Ocurri\xf3 un error al migrar los datos.",variant:"destructive"})}finally{g(!1),p()}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Migrador de Datos de Aforo"}),(0,t.jsx)(n.BT,{children:"Esta herramienta transfiere los datos de asignaci\xf3n (aforador, revisor, digitador), estados y declaraci\xf3n desde los 'Casos de Aforo' a la subcolecci\xf3n correspondiente en 'Hojas de Trabajo'."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[i?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Cargando estad\xedsticas..."]}):(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[(0,t.jsxs)("p",{children:["Total de Casos de Aforo relevantes: ",(0,t.jsx)("span",{className:"font-bold",children:a.totalCases})]}),(0,t.jsxs)("p",{children:["Casos pendientes de migraci\xf3n: ",(0,t.jsx)("span",{className:"font-bold text-amber-600",children:a.casesToMigrate})]})]}),(0,t.jsxs)(m.$,{onClick:x,disabled:i||l||0===a.casesToMigrate,children:[l?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),l?"Migrando Datos...":"Ejecutar Migraci\xf3n"]})]})]})}function A(){let{toast:e}=(0,f.dj)(),[a,s]=(0,r.useState)({casesWithLogs:0,logsToMigrate:0}),[i,o]=(0,r.useState)(!0),[l,g]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{o(!0);try{let e=(0,h.P)((0,h.Cs)(u.db,"actualizaciones")),a=await (0,h.GG)(e),t=a.size,r=new Set(a.docs.map(e=>e.ref.path.split("/")[1]));s({casesWithLogs:r.size,logsToMigrate:t})}catch(a){console.error("Error fetching bit\xe1cora stats:",a),e({title:"Error",description:"No se pudieron cargar las estad\xedsticas de migraci\xf3n de bit\xe1cora.",variant:"destructive"})}finally{o(!1)}},[e]);(0,r.useEffect)(()=>{p()},[p]);let x=async()=>{g(!0),e({title:"Migraci\xf3n iniciada",description:"Transfiriendo registros de bit\xe1cora. Esto puede tardar..."});let a=0;try{for(let e of(await (0,h.GG)((0,h.P)((0,h.rJ)(u.db,"AforoCases"),(0,h._M)("worksheetId","!=",null)))).docs){let s=e.data().worksheetId;if(s){let t=(0,h.rJ)(u.db,"AforoCases",e.id,"actualizaciones"),r=(0,h.rJ)(u.db,"worksheets",s,"actualizaciones"),i=await (0,h.GG)(t);if(!i.empty){let e=(0,h.wP)(u.db);i.forEach(s=>{let t=(0,h.H9)(r,s.id);e.set(t,s.data()),a++}),await e.commit()}}}a>0?e({title:"Migraci\xf3n Completa",description:"".concat(a," registros de bit\xe1cora han sido migrados.")}):e({title:"Sin cambios necesarios",description:"No se encontraron bit\xe1coras para migrar."})}catch(a){console.error("Error during bit\xe1cora migration:",a),e({title:"Error en Migraci\xf3n",description:"Ocurri\xf3 un error al migrar las bit\xe1coras.",variant:"destructive"})}finally{g(!1),p()}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Migrador de Bit\xe1cora de Aforo"}),(0,t.jsxs)(n.BT,{children:["Esta herramienta transfiere la subcolecci\xf3n `actualizaciones` desde `AforoCases` a `worksheets/","{ID}","/actualizaciones`."]})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[i?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Cargando estad\xedsticas..."]}):(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[(0,t.jsxs)("p",{children:["Casos con Bit\xe1cora: ",(0,t.jsx)("span",{className:"font-bold",children:a.casesWithLogs})]}),(0,t.jsxs)("p",{children:["Registros de Bit\xe1cora a Migrar: ",(0,t.jsx)("span",{className:"font-bold text-amber-600",children:a.logsToMigrate})]})]}),(0,t.jsxs)(m.$,{onClick:x,disabled:i||l||0===a.logsToMigrate,children:[l?(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),l?"Migrando Bit\xe1cora...":"Ejecutar Migraci\xf3n de Bit\xe1cora"]})]})]})}function y(){let{user:e,loading:a}=(0,i.A)();return a||!e||"admin"!==e.role?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,t.jsx)(o.G,{children:(0,t.jsxs)("div",{className:"py-2 md:py-5",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(m.$,{asChild:!0,variant:"outline",children:(0,t.jsxs)(p(),{href:"/admin/control",children:[(0,t.jsx)(l.A,{className:"mr-2 h-4 w-4"})," Volver a Control de Registros"]})})}),(0,t.jsxs)(x.tU,{defaultValue:"sync",children:[(0,t.jsxs)(x.j7,{children:[(0,t.jsx)(x.Xi,{value:"sync",children:"Herramientas de Datos"}),(0,t.jsx)(x.Xi,{value:"stats",children:"Estad\xedsticas de Actividad"})]}),(0,t.jsxs)(x.av,{value:"sync",className:"mt-4 grid gap-6",children:[(0,t.jsx)(A,{}),(0,t.jsx)(w,{}),(0,t.jsx)(v,{}),(0,t.jsx)(j,{}),(0,t.jsx)(b,{})]}),(0,t.jsx)(x.av,{value:"stats",className:"mt-4",children:(0,t.jsx)("p",{children:"M\xf3dulo de estad\xedsticas en desarrollo."})})]})]})})}},98564:(e,a,s)=>{Promise.resolve().then(s.bind(s,59652))}},e=>{e.O(0,[2992,7138,4865,2130,3744,5479,5171,8441,1255,7358],()=>e(e.s=98564)),_N_E=e.O()}]);