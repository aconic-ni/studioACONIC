(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3478],{11186:(e,t,r)=>{"use strict";r.d(t,{bq:()=>m,eb:()=>h,gC:()=>f,l6:()=>c,yv:()=>u});var s=r(95155),a=r(12115),i=r(47887),n=r(59007),l=r(42614),d=r(72251),o=r(64269);let c=i.bL;i.YJ;let u=i.WT,m=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=i.l9.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=i.PP.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=i.wn.displayName;let f=a.forwardRef((e,t)=>{let{className:r,children:a,position:n="popper",...l}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:[(0,s.jsx)(x,{}),(0,s.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(p,{})]})})});f.displayName=i.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=i.JU.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(i.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:a})]})});h.displayName=i.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=i.wv.displayName},13630:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},22452:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},24820:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},31120:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r(95155),a=r(12115),i=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});n.displayName="Textarea"},36204:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},38162:(e,t,r)=>{"use strict";r.d(t,{C1:()=>k,bL:()=>C});var s=r(12115),a=r(94446),i=r(3468),n=r(92556),l=r(23558),d=r(78108),o=r(84288),c=r(76842),u=r(97602),m=r(95155),x="Checkbox",[p,f]=(0,i.A)(x),[h,j]=p(x),g=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:i,checked:d,defaultChecked:o,required:c,disabled:x,value:p="on",onCheckedChange:f,form:j,...g}=e,[v,b]=s.useState(null),C=(0,a.s)(t,e=>b(e)),k=s.useRef(!1),A=!v||j||!!v.closest("form"),[E=!1,R]=(0,l.i)({prop:d,defaultProp:o,onChange:f}),S=s.useRef(E);return s.useEffect(()=>{let e=null==v?void 0:v.form;if(e){let t=()=>R(S.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,R]),(0,m.jsxs)(h,{scope:r,state:E,disabled:x,children:[(0,m.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":N(E)?"mixed":E,"aria-required":c,"data-state":w(E),"data-disabled":x?"":void 0,disabled:x,value:p,...g,ref:C,onKeyDown:(0,n.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.m)(e.onClick,e=>{R(e=>!!N(e)||!e),A&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),A&&(0,m.jsx)(y,{control:v,bubbles:!k.current,name:i,value:p,checked:E,required:c,disabled:x,form:j,style:{transform:"translateX(-100%)"},defaultChecked:!N(o)&&o})]})});g.displayName=x;var v="CheckboxIndicator",b=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...a}=e,i=j(v,r);return(0,m.jsx)(c.C,{present:s||N(i.state)||!0===i.state,children:(0,m.jsx)(u.sG.span,{"data-state":w(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var y=e=>{let{control:t,checked:r,bubbles:a=!0,defaultChecked:i,...n}=e,l=s.useRef(null),c=(0,d.Z)(r),u=(0,o.X)(t);s.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let s=new Event("click",{bubbles:a});e.indeterminate=N(r),t.call(e,!N(r)&&r),e.dispatchEvent(s)}},[c,r,a]);let x=s.useRef(!N(r)&&r);return(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=i?i:x.current,...n,tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return"indeterminate"===e}function w(e){return N(e)?"indeterminate":e?"checked":"unchecked"}var C=g,k=b},41052:(e,t,r)=>{"use strict";r.d(t,{C5:()=>j,MJ:()=>h,eI:()=>p,lR:()=>f,lV:()=>o,zB:()=>u});var s=r(95155),a=r(12115),i=r(32467),n=r(22544),l=r(64269),d=r(76444);let o=n.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(x),{getFieldState:r,formState:s}=(0,n.xW)(),i=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...i}=e,n=a.useId();return(0,s.jsx)(x.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...i})})});p.displayName="FormItem";let f=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:i,formItemId:n}=m();return(0,s.jsx)(d.J,{ref:t,className:(0,l.cn)(i&&"text-destructive",r),htmlFor:n,...a})});f.displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:l,formMessageId:d}=m();return(0,s.jsx)(i.DX,{ref:t,id:n,"aria-describedby":a?"".concat(l," ").concat(d):"".concat(l),"aria-invalid":!!a,...r})});h.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:i}=m();return(0,s.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let j=a.forwardRef((e,t)=>{var r;let{className:a,children:i,...n}=e,{error:d,formMessageId:o}=m(),c=d?String(null!=(r=null==d?void 0:d.message)?r:""):i;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",a),...n,children:c}):null});j.displayName="FormMessage"},51834:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>u,Es:()=>x,HM:()=>o,L3:()=>p,c7:()=>m,lG:()=>l,rr:()=>f});var s=r(95155),a=r(12115),i=r(89511),n=r(64269);let l=i.bL;i.l9;let d=i.ZL,o=i.bm,c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});c.displayName=i.hJ.displayName;let u=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(i.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[a,(0,s.jsx)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(0,s.jsx)("span",{className:"sr-only",children:"Close"})})]})]})});u.displayName=i.UC.displayName;let m=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let x=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};x.displayName="DialogFooter";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});p.displayName=i.hE.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});f.displayName=i.VY.displayName},53489:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},65142:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155),a=r(12115),i=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","aria-[invalid=true]:border-destructive aria-[invalid=true]:ring-destructive",r),ref:t,...n})});n.displayName="Input"},65264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var s=r(95155),a=r(22544),i=r(66942),n=r(15653),l=r(3998),d=r(65142),o=r(41052),c=r(86948),u=r(22452),m=r(13630),x=r(36204),p=r(92033),f=r(15894),h=r(54901),j=r(14585),g=r(19708),v=r(20063),b=r(52619),y=r.n(b),N=r(12115),w=r(11186),C=r(87270),k=r(31120),A=r(73457),E=r(51834),R=r(18527),S=r(24820),z=r(92678),q=r(53489),T=r(5282),D=r(80160),I=r(54264),F=r.n(I),L=r(15239);function M(e){let{isOpen:t,onClose:r,ticketData:a}=e,i=(0,N.useRef)(null);return(0,s.jsx)(E.lG,{open:t,onOpenChange:e=>!e&&r(),children:(0,s.jsxs)(E.Cf,{className:"sm:max-w-2xl",children:[(0,s.jsxs)(E.c7,{className:"items-center text-center",children:[(0,s.jsx)(R.A,{className:"h-16 w-16 text-green-500 mb-4"}),(0,s.jsx)(E.L3,{className:"text-xl font-semibold text-foreground",children:"Solicitud Legal Enviada"})]}),(0,s.jsx)(E.rr,{asChild:!0,children:(0,s.jsx)("div",{className:"text-center text-muted-foreground space-y-3",children:(0,s.jsx)("p",{children:"Su solicitud ha sido registrada con \xe9xito. Puede descargar el ticket de seguimiento."})})}),(0,s.jsxs)("div",{ref:i,id:"capture",className:"p-4 my-4 border rounded-lg bg-card text-card-foreground",children:[(0,s.jsx)(L.default,{src:"/AconicExaminer/imagenes/HEADERSEXA.svg",alt:"Examen Header",width:800,height:100,className:"w-full h-auto mb-4",priority:!0}),(0,s.jsx)("h3",{className:"font-bold text-center text-lg mb-4",children:"Ticket de Servicio Legal"}),(0,s.jsxs)("div",{className:"text-sm space-y-2 border-t pt-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID de Ticket:"})," ",a.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Fecha:"})," ",(0,T.GP)(a.date,"PPP p",{locale:D.es})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"NE:"})," ",a.ne]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Consignatario:"})," ",a.consignee]})]}),(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)("h4",{className:"font-semibold mb-1",children:"Servicios Solicitados:"}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(C.XI,{children:[(0,s.jsx)(C.A0,{children:(0,s.jsxs)(C.Hj,{children:[(0,s.jsx)(C.nd,{children:"Servicio"}),(0,s.jsx)(C.nd,{className:"text-right",children:"Cantidad"})]})}),(0,s.jsx)(C.BF,{children:a.services.map((e,t)=>(0,s.jsxs)(N.Fragment,{children:[(0,s.jsxs)(C.Hj,{children:[(0,s.jsx)(C.nA,{children:e.serviceType}),(0,s.jsx)(C.nA,{className:"text-right",children:e.quantity})]}),"Dictamen Tecnico INE"===e.serviceType&&(0,s.jsx)(C.Hj,{className:"bg-secondary/30",children:(0,s.jsx)(C.nA,{colSpan:2,className:"p-2",children:(0,s.jsxs)("div",{className:"text-xs text-muted-foreground grid grid-cols-3 gap-x-4 gap-y-1 pl-4",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Factura:"})," ",e.factura||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Contenedor:"})," ",e.contenedor||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Item:"})," ",e.item||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Marca:"})," ",e.marcaEquipo||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Modelo:"})," ",e.modeloEquipo||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Tipo:"})," ",e.equipoType||"N/A"]})]})})})]},t))})]})})]}),a.observations&&(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)("h4",{className:"font-semibold mb-1",children:"Observaciones:"}),(0,s.jsx)("p",{className:"p-2 border rounded-md bg-secondary/30 text-xs",children:a.observations})]}),(0,s.jsxs)("div",{className:"flex items-center pt-2",children:[a.authorizedByClient?(0,s.jsx)(S.A,{className:"h-4 w-4 text-green-600 mr-2"}):(0,s.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:"Autorizado por el cliente"})]})]})]}),(0,s.jsxs)(E.Es,{className:"flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(l.$,{onClick:()=>{if(i.current){let e=i.current;F()(e,{scale:2}).then(e=>{let t=document.createElement("a");t.download="ticket-legal-".concat(a.ne,".jpg"),t.href=e.toDataURL("image/jpeg",.95),t.click()})}},variant:"secondary",className:"w-full sm:w-auto",children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Descargar Ticket"]}),(0,s.jsx)(l.$,{onClick:r,className:"btn-primary w-full sm:w-auto",children:"Cerrar"})]})]})})}var P=r(76444);let B=["Declaracion Notarial","Poder Especial","Certificacion de Documentos","Razon de Fecha Cierta","Dictamen Tecnico INE","Caso por Duda de Valor","Certificacion de Fotocopia"],J=n.z.object({serviceType:n.z.string().min(1,"Debe seleccionar un servicio."),quantity:n.z.coerce.number().min(1,"La cantidad debe ser al menos 1."),factura:n.z.string().optional(),contenedor:n.z.string().optional(),item:n.z.string().optional(),marcaEquipo:n.z.string().optional(),modeloEquipo:n.z.string().optional(),equipoType:n.z.enum(["Refrigerador","Aire Acondicionado"]).optional()}),H=n.z.object({ne:n.z.string().min(1,"NE es requerido."),consignee:n.z.string().min(1,"Consignatario es requerido."),services:n.z.array(J).min(1,"Debe a\xf1adir al menos un servicio."),observations:n.z.string().optional(),authorizedByClient:n.z.boolean().default(!1)});function V(){let{user:e}=(0,h.A)(),{toast:t}=(0,f.dj)(),r=(0,v.useRouter)(),n=(0,v.useSearchParams)(),[b,E]=(0,N.useState)(!1),[R,S]=(0,N.useState)(!1),[z,q]=(0,N.useState)(null),[T,D]=(0,N.useState)(""),[I,F]=(0,N.useState)(1),[L,J]=(0,N.useState)(""),[V,_]=(0,N.useState)(""),[O,X]=(0,N.useState)(""),[G,U]=(0,N.useState)(""),[$,Z]=(0,N.useState)(""),[W,Y]=(0,N.useState)(void 0),K=(0,N.useRef)(!1),Q=(0,a.mN)({resolver:(0,i.u)(H),defaultValues:{ne:"",consignee:"",services:[],observations:"",authorizedByClient:!1}}),{fields:ee,append:et,remove:er}=(0,a.jz)({control:Q.control,name:"services"});(0,N.useEffect)(()=>{if(K.current)return;let e=n.get("ne"),t=n.get("consignee"),r=n.get("serviceType"),s=!1;if(e&&(Q.setValue("ne",e),s=!0),t&&(Q.setValue("consignee",t),s=!0),r){let e={serviceType:r,quantity:1};if("Dictamen Tecnico INE"===r){e.factura=n.get("factura")||"",e.contenedor=n.get("contenedor")||"",e.item=n.get("item")||"",e.marcaEquipo=n.get("marca")||"",e.modeloEquipo=n.get("modelo")||"";let t=n.get("tipoEquipo");("Refrigerador"===t||"Aire Acondicionado"===t)&&(e.equipoType=t)}et(e),s=!0,K.current=!0}s&&Q.trigger()},[n,Q,et]);let es=(null==e?void 0:e.role)==="coordinadora"?"/assignments":"/executive";async function ea(r){if(!e||!e.email)return void t({title:"Error de autenticaci\xf3n",variant:"destructive"});E(!0);let s="LEG-".concat(Date.now()),a=(0,g.H9)(j.db,"solicitudesLegales",s),i={...r,id:s,status:"pendiente",requestedBy:e.email,requestedAt:g.Dc.fromDate(new Date)};try{await (0,g.BN)(a,i),q({id:s,date:new Date,ne:r.ne,services:r.services,consignee:r.consignee,observations:r.observations,authorizedByClient:r.authorizedByClient}),S(!0),Q.reset()}catch(e){console.error("Error creating legal request:",e),t({title:"Error",description:"No se pudo crear la solicitud legal.",variant:"destructive"})}finally{E(!1)}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Zp,{className:"w-full max-w-4xl mx-auto custom-shadow",children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{className:"text-2xl font-semibold",children:"Solicitud de Servicio Legal"}),(0,s.jsx)(c.BT,{children:"Complete la informaci\xf3n para generar una nueva solicitud al departamento legal."})]}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)(o.lV,{...Q,children:(0,s.jsxs)("form",{onSubmit:Q.handleSubmit(ea),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(o.zB,{control:Q.control,name:"ne",render:e=>{let{field:t}=e;return(0,s.jsxs)(o.eI,{children:[(0,s.jsx)(o.lR,{children:"NE (Seguimiento NX1) *"}),(0,s.jsx)(o.MJ,{children:(0,s.jsx)(d.p,{placeholder:"Ej: NX1-12345",...t})}),(0,s.jsx)(o.C5,{})]})}}),(0,s.jsx)(o.zB,{control:Q.control,name:"consignee",render:e=>{let{field:t}=e;return(0,s.jsxs)(o.eI,{children:[(0,s.jsx)(o.lR,{children:"Consignatario *"}),(0,s.jsx)(o.MJ,{children:(0,s.jsx)(d.p,{placeholder:"Nombre del consignatario",...t})}),(0,s.jsx)(o.C5,{})]})}})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Servicios Solicitados"}),(0,s.jsxs)("div",{className:"space-y-4 p-3 border rounded-md bg-secondary/30",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_1fr_auto] gap-3 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Tipo de Servicio *"}),(0,s.jsxs)(w.l6,{value:T,onValueChange:D,children:[(0,s.jsx)(w.bq,{children:(0,s.jsx)(w.yv,{placeholder:"Seleccionar..."})}),(0,s.jsx)(w.gC,{children:B.map(e=>(0,s.jsx)(w.eb,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Cantidad *"}),(0,s.jsx)(d.p,{type:"number",min:"1",value:I,onChange:e=>F(Math.max(1,parseInt(e.target.value,10)||1))})]})]}),"Dictamen Tecnico INE"===T&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 pt-3 border-t border-muted",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Factura"}),(0,s.jsx)(d.p,{value:L,onChange:e=>J(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Contenedor"}),(0,s.jsx)(d.p,{value:V,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Item"}),(0,s.jsx)(d.p,{value:O,onChange:e=>X(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Marca de Equipo"}),(0,s.jsx)(d.p,{value:G,onChange:e=>U(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Modelo de Equipo"}),(0,s.jsx)(d.p,{value:$,onChange:e=>Z(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(P.J,{children:"Tipo de Equipo"}),(0,s.jsxs)(w.l6,{value:W,onValueChange:e=>Y(e),children:[(0,s.jsx)(w.bq,{children:(0,s.jsx)(w.yv,{placeholder:"Refrigerador o Aire Acondicionado..."})}),(0,s.jsxs)(w.gC,{children:[(0,s.jsx)(w.eb,{value:"Refrigerador",children:"Refrigerador"}),(0,s.jsx)(w.eb,{value:"Aire Acondicionado",children:"Aire Acondicionado"})]})]})]})]}),(0,s.jsxs)(l.$,{type:"button",onClick:()=>{if(!T)return void t({title:"Error",description:"Por favor, seleccione un tipo de servicio.",variant:"destructive"});let e={serviceType:T,quantity:I};"Dictamen Tecnico INE"===T&&(e.factura=L,e.contenedor=V,e.item=O,e.marcaEquipo=G,e.modeloEquipo=$,e.equipoType=W),et(e),D(""),F(1),J(""),_(""),X(""),U(""),Z(""),Y(void 0)},className:"w-full md:w-auto",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"})," A\xf1adir Servicio a la Lista"]})]}),ee.length>0&&(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(C.XI,{children:[(0,s.jsx)(C.A0,{children:(0,s.jsxs)(C.Hj,{children:[(0,s.jsx)(C.nd,{children:"Servicio"}),(0,s.jsx)(C.nd,{children:"Cantidad"}),(0,s.jsx)(C.nd,{className:"text-right",children:"Acci\xf3n"})]})}),(0,s.jsx)(C.BF,{children:ee.map((e,t)=>(0,s.jsxs)(C.Hj,{children:[(0,s.jsx)(C.nA,{children:e.serviceType}),(0,s.jsx)(C.nA,{children:e.quantity}),(0,s.jsx)(C.nA,{className:"text-right",children:(0,s.jsx)(l.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>er(t),children:(0,s.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})})]},e.id))})]})}),(0,s.jsx)(o.zB,{control:Q.control,name:"services",render:e=>{let{field:t}=e;return(0,s.jsx)(o.C5,{})}})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsx)(o.zB,{control:Q.control,name:"observations",render:e=>{let{field:t}=e;return(0,s.jsxs)(o.eI,{children:[(0,s.jsx)(o.lR,{children:"Observaciones"}),(0,s.jsx)(o.MJ,{children:(0,s.jsx)(k.T,{placeholder:"A\xf1ada cualquier observaci\xf3n o detalle adicional aqu\xed...",...t})}),(0,s.jsx)(o.C5,{})]})}}),(0,s.jsx)(o.zB,{control:Q.control,name:"authorizedByClient",render:e=>{let{field:t}=e;return(0,s.jsxs)(o.eI,{className:"flex flex-row items-center space-x-3 space-y-0 pt-2",children:[(0,s.jsx)(o.MJ,{children:(0,s.jsx)(A.S,{checked:t.value,onCheckedChange:t.onChange})}),(0,s.jsx)("div",{className:"space-y-1 leading-none",children:(0,s.jsx)(o.lR,{children:"Autorizado por el cliente"})})]})}})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-6",children:[(0,s.jsx)(l.$,{type:"button",variant:"ghost",asChild:!0,children:(0,s.jsxs)(y(),{href:es,children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Volver"]})}),(0,s.jsxs)(l.$,{type:"submit",className:"btn-primary",disabled:b,children:[b&&(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Enviando...":"Enviar Solicitud"]})]})]})})})]}),z&&(0,s.jsx)(M,{isOpen:R,onClose:()=>{S(!1),q(null),r.push("/executive")},ticketData:z})]})}var _=r(35434);function O(){let{user:e,loading:t}=(0,h.A)(),r=(0,v.useRouter)();return((0,N.useEffect)(()=>{t||e||r.push("/")},[e,t,r]),t||!e)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,s.jsx)(_.G,{children:(0,s.jsx)("div",{className:"py-2 md:py-5",children:(0,s.jsx)(V,{})})})}function X(){return(0,s.jsx)(N.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"})}),children:(0,s.jsx)(O,{})})}},73457:(e,t,r)=>{"use strict";r.d(t,{S:()=>d});var s=r(95155),a=r(12115),i=r(38162),n=r(72251),l=r(64269);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=i.bL.displayName},76444:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(95155),a=r(12115),i=r(10489),n=r(83101),l=r(64269);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(d(),r),...a})});o.displayName=i.b.displayName},87063:(e,t,r)=>{Promise.resolve().then(r.bind(r,65264))},87270:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>c});var s=r(95155),a=r(12115),i=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",r),...a})});l.displayName="TableHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",r),...a})});d.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});o.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},92678:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}},e=>{e.O(0,[2992,7138,4316,4865,2130,3744,5282,9351,3504,5479,5171,8441,1255,7358],()=>e(e.s=87063)),_N_E=e.O()}]);