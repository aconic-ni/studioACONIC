(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4780],{13391:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>en});var s=a(95155),r=a(12115),i=a(20063),n=a(54901),o=a(35434),l=a(3998),c=a(65142),d=a(31120),u=a(86948),m=a(28127),x=a(92033),p=a(90109),h=a(53489),f=a(90043),j=a(14585),g=a(19708),v=a(27384),N=a(5282),y=a(47691),b=a(33086),w=a(90231),C=a(79894),S=a(80160),A=a(11186),D=a(26333),E=a(50276),P=a(73457),M=a(51834),I=a(15894),k=a(64269),R=a(76444),L=a(87270),F=a(44846),U=a(46767),O=a(11647),B=a(60406),$=a(19201),G=a(13630),_=a(7639),T=a(36654),q=a(75496),z=a(27500),H=a(82274),Z=a(78770),V=a(66065),W=a(24820),J=a(44385),Q=a(13496),K=a(50984),Y=a(27314);let X=e=>{let{label:t,children:a}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-border/50",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:t}),(0,s.jsx)("div",{className:"text-sm text-right text-foreground",children:a})]})},ee=e=>{var t;let{solicitud:a,cardActions:r,currentUserRole:i}=e,n=a.hasOpenUrgentComment,o="w-full";return n?o="".concat(o," bg-red-100 dark:bg-red-900/40"):a.soporte&&(o="".concat(o," bg-amber-50 dark:bg-amber-800/30")),(0,s.jsxs)(u.Zp,{className:o,children:[(0,s.jsx)(u.aR,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(u.ZB,{className:"font-bold text-lg text-primary",children:a.examNe}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:a.consignatario})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("span",{className:"font-bold text-lg",children:((e,t)=>{if(null==e||""===e)return"N/A";let a=Number(e);if(isNaN(a))return String(e);let s="";return"cordoba"===t?s="C$":"dolar"===t?s="US$":"euro"===t&&(s="€"),"".concat(s).concat(a.toLocaleString("es-NI",{minimumFractionDigits:2,maximumFractionDigits:2}))})(a.monto,null!=(t=a.montoMoneda)?t:void 0)}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:a.solicitudId})]})]})}),(0,s.jsxs)(u.Wu,{children:[(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)(X,{label:"Fecha Solicitud",children:(e=>e?(0,N.GP)(e,"dd/MM/yy",{locale:S.es}):"N/A")(a.examDate)}),(0,s.jsx)(X,{label:"Guardado Por",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Y.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)("span",{children:a.savedBy})]})}),(0,s.jsx)(X,{label:"Estado Pago",children:((e,t)=>{var a;return"Pagado"===e.paymentStatus?(0,s.jsxs)(O.E,{className:"bg-green-100 text-green-700 hover:bg-green-200 flex items-center",children:[(0,s.jsx)(K.A,{className:"h-3.5 w-3.5 mr-1"})," Pagado"]}):(null==(a=e.paymentStatus)?void 0:a.startsWith("Error:"))?(0,s.jsx)(l.$,{variant:"link",className:"p-0 h-auto",onClick:t,children:(0,s.jsxs)(O.E,{variant:"destructive",className:"cursor-pointer flex items-center",children:[(0,s.jsx)(Z.A,{className:"h-3.5 w-3.5 mr-1"})," Error"]})}):(0,s.jsx)(O.E,{variant:"outline",children:"Pendiente"})})(a,()=>r.onOpenViewErrorDialog(a.paymentStatus.substring(7)))}),(0,s.jsx)(X,{label:"Recepci\xf3n Docs",children:a.recepcionDCStatus?(0,s.jsxs)(O.E,{className:"bg-blue-100 text-blue-700 flex items-center",children:[(0,s.jsx)(K.A,{className:"h-3.5 w-3.5 mr-1"})," Recibido"]}):(0,s.jsx)(O.E,{variant:"outline",children:"Pendiente"})})]}),(0,s.jsx)(Q.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,s.jsxs)(Q.As,{value:"details",children:[(0,s.jsx)(Q.$m,{children:"M\xe1s Detalles"}),(0,s.jsx)(Q.ub,{children:(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsx)(X,{label:"Referencia",children:a.examReference||"N/A"}),(0,s.jsx)(X,{label:"Declaraci\xf3n",children:a.declaracionNumero||"N/A"}),(0,s.jsx)(X,{label:"ID Solicitud",children:a.solicitudId}),(0,s.jsx)(X,{label:"Estado Solicitud",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 justify-end",children:[a.isMemorandum&&(0,s.jsx)(O.E,{variant:"destructive",className:"text-xs",children:"Memorandum"}),a.documentosAdjuntos&&(0,s.jsx)(O.E,{className:"text-xs bg-blue-100 text-blue-700",children:"Docs Adjuntos"}),a.soporte&&(0,s.jsx)(O.E,{className:"text-xs bg-amber-100 text-amber-700",children:"Soporte"})]})})]})})]})})]}),(0,s.jsxs)(u.wL,{className:"flex justify-end gap-2",children:["admin"===i&&(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>r.onDeleteSolicitud(a.solicitudId),className:"text-destructive hover:text-destructive",children:(0,s.jsx)(G.A,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>r.onOpenCommentsDialog(a.solicitudId),children:(0,s.jsx)(q.A,{className:"h-4 w-4"})}),(0,s.jsxs)(l.$,{variant:"default",size:"sm",onClick:()=>r.onViewDetails(a),children:[(0,s.jsx)(T.A,{className:"mr-2 h-4 w-4"})," Ver Detalles"]})]})]},a.solicitudId)},et=e=>{let{solicitudes:t,searchType:a,searchTerm:i,currentUserRole:o,isMinutaValidationEnabled:d,onUpdatePaymentStatus:m,onUpdateRecepcionDCStatus:x,onUpdateEmailMinutaStatus:h,onOpenMessageDialog:f,onSaveMinuta:j,onViewDetails:g,onOpenCommentsDialog:v,onDeleteSolicitud:y,onRefreshSearch:b,onFilterByDuplicateSet:w,filterRecpDocsInput:C,setFilterRecpDocsInput:A,filterNotMinutaInput:D,setFilterNotMinutaInput:E,filterSolicitudIdInput:M,setFilterSolicitudIdInput:I,filterNEInput:R,setFilterNEInput:Q,filterEstadoPagoInput:K,setFilterEstadoPagoInput:Y,filterFechaSolicitudInput:X,setFilterFechaSolicitudInput:et,filterMontoInput:ea,setFilterMontoInput:es,filterConsignatarioInput:er,setFilterConsignatarioInput:ei,filterDeclaracionInput:en,setFilterDeclaracionInput:eo,filterReferenciaInput:el,setFilterReferenciaInput:ec,filterGuardadoPorInput:ed,setFilterGuardadoPorInput:eu,filterEstadoSolicitudInput:em,setFilterEstadoSolicitudInput:ex,duplicateSets:ep,onResolveDuplicate:eh,resolvedDuplicateKeys:ef,permanentlyResolvedDuplicateKeys:ej,onOpenViewErrorDialog:eg}=e,{user:ev}=(0,n.A)(),eN=(0,J.a)(),ey=(0,r.useMemo)(()=>{let e=new Set;return ep.forEach(t=>t.forEach(t=>e.add(t))),Array.from(e)},[ep]),eb=(0,r.useMemo)(()=>new Set([...ef,...ej]),[ef,ej]);if(!t||0===t.length){let e="No se encontraron solicitudes para los criterios ingresados.";return"dateToday"===a?e="No se encontraron solicitudes para hoy.":"dateCurrentMonth"===a&&(e="No se encontraron solicitudes para el mes actual."),(0,s.jsx)("p",{className:"text-muted-foreground text-center py-4",children:e})}let ew=()=>"dateToday"===a?"Solicitudes de Hoy (".concat((0,N.GP)(new Date,"PPP",{locale:S.es}),")"):"dateCurrentMonth"===a?"Solicitudes del Mes Actual (".concat((0,N.GP)(new Date,"MMMM yyyy",{locale:S.es}),")"):"dateSpecific"===a&&i?"Solicitudes del ".concat(i):"dateRange"===a&&i?"Solicitudes para ".concat(i):"Solicitudes Encontradas",eC="autorevisor"===o||"autorevisor_plus"===o,eS="calificador"===o||"admin"===o||"supervisor"===o,eA="calificador"===o||"admin"===o||"supervisor"===o||"revisor"===o,eD={onViewDetails:g,onOpenCommentsDialog:v,onDeleteSolicitud:y,onOpenViewErrorDialog:eg};return eN?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:[ew()," ",(0,s.jsx)(O.E,{variant:"secondary",children:t.length})]}),t.map(e=>(0,s.jsx)(ee,{solicitud:e,cardActions:eD,currentUserRole:o},e.solicitudId))]}):(0,s.jsxs)(u.Zp,{className:"mt-6 w-full custom-shadow",children:[(0,s.jsxs)(u.aR,{children:[(0,s.jsx)(u.ZB,{className:"text-xl md:text-2xl font-semibold text-foreground",children:ew()}),(0,s.jsxs)(u.BT,{className:"text-muted-foreground",children:["Se encontraron ",t.length," solicitud(es) asociadas."]}),ep.size>0&&(0,s.jsx)("div",{className:"mt-4 space-y-3",children:Array.from(ep.entries()).map(e=>{let[t,a]=e;if(eb.has(t))return null;let r=t.split("-")[0];return(0,s.jsxs)("div",{className:"p-3 text-sm text-destructive bg-destructive/10 border border-destructive/30 rounded-md",role:"alert",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(B.A,{className:"h-5 w-5 mr-2 text-destructive"}),(0,s.jsxs)("p",{className:"font-semibold",children:["Alerta de Duplicado Potencial (NE: ",r,")"]})]}),(0,s.jsxs)("p",{children:["Se encontraron m\xfaltiples solicitudes con el mismo NE, Monto y Moneda. IDs: ",a.join(", "),"."]}),(0,s.jsx)("p",{className:"mt-1",children:"Por favor, revise y valide esta situaci\xf3n."}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"border-primary text-primary hover:bg-primary/10 hover:text-primary-darker",onClick:()=>w(a),children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Ver solo este conjunto"]}),eS&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"border-green-600 text-green-700 hover:bg-green-100 hover:text-green-800",onClick:()=>eh(t,"validated_not_duplicate"),children:[(0,s.jsx)($.A,{className:"mr-2 h-4 w-4"})," Validado (No Duplicado)"]}),(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"border-orange-600 text-orange-700 hover:bg-orange-100 hover:text-orange-800",onClick:()=>eh(t,"deletion_requested"),children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"})," Solicitar Eliminaci\xf3n"]})]})]})]},t)})})]}),(0,s.jsx)(u.Wu,{children:(0,s.jsx)("div",{className:"overflow-x-auto table-container rounded-lg border",children:(0,s.jsxs)(L.XI,{children:[(0,s.jsx)(L.A0,{className:"bg-secondary/50",children:(0,s.jsxs)(L.Hj,{children:[(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:b,className:"h-6 w-6 p-0 mr-1",children:(0,s.jsx)(_.A,{className:"h-4 w-4 text-primary"})}),"Acciones"]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Estado de Pago",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Estado Pago...",value:K,onChange:e=>Y(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["RECP. DOCS",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar (Recibido/Pendiente)...",value:C,onChange:e=>A(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Estado Solicitud",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Estado Sol...",value:em,onChange:e=>ex(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Consignatario",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Consignatario...",value:er,onChange:e=>ei(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Declaracion",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Declaracion...",value:en,onChange:e=>eo(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Fecha",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Fecha (dd/MM/yy)...",value:X,onChange:e=>et(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["NE",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar NE...",value:R,onChange:e=>Q(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Monto",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Monto...",value:ea,onChange:e=>es(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Referencia",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar Referencia...",value:el,onChange:e=>ec(e.target.value),className:"mt-1 h-8 text-xs"})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["Guardado Por",(0,s.jsx)(c.p,{type:"text",placeholder:eC?"Filtrado por rol":"Filtrar Guardado Por...",value:ed,onChange:e=>eu(e.target.value),className:"mt-1 h-8 text-xs",disabled:eC,readOnly:eC})]}),(0,s.jsxs)(L.nd,{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-nowrap",children:["ID Solicitud",(0,s.jsx)(c.p,{type:"text",placeholder:"Filtrar ID...",value:M,onChange:e=>I(e.target.value),className:"mt-1 h-8 text-xs"})]})]})}),(0,s.jsx)(L.BF,{className:"bg-card divide-y divide-border",children:t.map(e=>{var t,a,r,i;let n=ey.includes(e.solicitudId),c="".concat(null==(t=e.examNe)?void 0:t.trim(),"-").concat(e.monto,"-").concat(null==(a=e.montoMoneda)?void 0:a.trim()),d=ef.includes(c),u=ej.includes(c),p=d||u,h=e.hasOpenUrgentComment,b="hover:bg-muted/50 dark:hover:bg-muted/80";return h?b="bg-red-200 hover:bg-red-300 dark:bg-red-600/40 dark:hover:bg-red-600/50":n&&!p?b="bg-rose-200 hover:bg-rose-300 dark:bg-rose-500/50 dark:hover:bg-rose-500/60":n&&p?b="bg-emerald-200 hover:bg-emerald-300 dark:bg-emerald-500/50 dark:hover:bg-emerald-500/60":e.soporte&&(b="bg-amber-100 hover:bg-amber-200 dark:bg-amber-700/30 dark:hover:bg-amber-700/40"),(0,s.jsxs)(L.Hj,{className:(0,k.cn)(b),children:[(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:["admin"===o&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>y(e.solicitudId),className:"px-2 py-1 h-auto text-destructive hover:bg-destructive/10","aria-label":"Eliminar Solicitud",children:(0,s.jsx)(G.A,{className:"h-3.5 w-3.5"})})}),(0,s.jsx)(U.ZI,{children:(0,s.jsx)("p",{children:"Eliminar Solicitud"})})]})}),(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>g(e),className:"px-2 py-1 h-auto","aria-label":"Ver Detalles",children:(0,s.jsx)(T.A,{className:"h-3.5 w-3.5"})})}),(0,s.jsx)(U.ZI,{children:(0,s.jsx)("p",{children:"Ver Detalles"})})]})}),(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>v(e.solicitudId),className:"px-2 py-1 h-auto","aria-label":"Comentarios",children:(0,s.jsx)(q.A,{className:"h-3.5 w-3.5"})})}),(0,s.jsx)(U.ZI,{children:(0,s.jsx)("p",{children:"Comentarios"})})]})}),(0,s.jsx)(O.E,{variant:"secondary",className:"h-6 min-w-[1.5rem] flex items-center justify-center px-1.5 py-0.5 text-xs",children:null!=(r=e.commentsCount)?r:0})]})}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F.d,{checked:"Pagado"===e.paymentStatus,onCheckedChange:t=>{t?j(e.solicitudId,null):"Pagado"===e.paymentStatus&&m(e.solicitudId,null)},disabled:!eA||e.isMemorandum,"aria-label":"Marcar como pagado / pendiente"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>f(e.solicitudId),"aria-label":"A\xf1adir mensaje de error",className:"h-7 w-7 p-0",disabled:e.isMemorandum,children:(0,s.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground hover:text-primary"})}),"Pagado"===e.paymentStatus&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(O.E,{className:"bg-green-100 text-green-700 hover:bg-green-200",children:"Pagado"}),e.minutaNumber&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,s.jsx)(H.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,s.jsx)(U.ZI,{className:"text-xs",children:(0,s.jsxs)("p",{children:["Minuta No: ",e.minutaNumber]})})]})})]}),e.paymentStatus&&e.paymentStatus.startsWith("Error:")?(0,s.jsx)(l.$,{variant:"link",className:"p-0 h-auto",onClick:()=>eg(e.paymentStatus.substring(7)),children:(0,s.jsxs)(O.E,{variant:"destructive",className:"cursor-pointer flex items-center",children:[(0,s.jsx)(Z.A,{className:"h-3.5 w-3.5 mr-1"})," Error"]})}):null,(!e.paymentStatus||e.paymentStatus&&!e.paymentStatus.startsWith("Error:")&&"Pagado"!==e.paymentStatus)&&(0,s.jsx)(O.E,{variant:"outline",children:"Pendiente"}),(e.paymentStatusLastUpdatedAt||e.paymentStatusLastUpdatedBy)&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,s.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,s.jsxs)(U.ZI,{className:"text-xs",children:[(0,s.jsx)("p",{children:"\xdaltima actualizaci\xf3n (Pago):"}),e.paymentStatusLastUpdatedBy&&(0,s.jsxs)("p",{children:["Por: ",e.paymentStatusLastUpdatedBy]}),e.paymentStatusLastUpdatedAt&&e.paymentStatusLastUpdatedAt instanceof Date&&(0,s.jsxs)("p",{children:["Fecha: ",(0,N.GP)(e.paymentStatusLastUpdatedAt,"Pp",{locale:S.es})]})]})]})})]})}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm",children:"calificador"===o?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(P.S,{checked:!!e.recepcionDCStatus,onCheckedChange:t=>{x(e.solicitudId,!!t)},"aria-label":"Marcar como recibido / pendiente de documento"}),e.recepcionDCStatus?(0,s.jsxs)(O.E,{className:"bg-blue-100 text-blue-700 hover:bg-blue-200 flex items-center",children:[(0,s.jsx)(W.A,{className:"h-3.5 w-3.5 mr-1"})," Recibido"]}):(0,s.jsx)(O.E,{variant:"outline",children:"Pendiente"}),(e.recepcionDCLastUpdatedAt||e.recepcionDCLastUpdatedBy)&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,s.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,s.jsxs)(U.ZI,{className:"text-xs",children:[(0,s.jsx)("p",{children:"\xdaltima actualizaci\xf3n (Recep. Doc.):"}),e.recepcionDCLastUpdatedBy&&(0,s.jsxs)("p",{children:["Por: ",e.recepcionDCLastUpdatedBy]}),e.recepcionDCLastUpdatedAt&&e.recepcionDCLastUpdatedAt instanceof Date&&(0,s.jsxs)("p",{children:["Fecha: ",(0,N.GP)(e.recepcionDCLastUpdatedAt,"Pp",{locale:S.es})]})]})]})})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[e.recepcionDCStatus?(0,s.jsxs)(O.E,{className:"bg-blue-100 text-blue-700 hover:bg-blue-200 flex items-center",children:[(0,s.jsx)(W.A,{className:"h-3.5 w-3.5 mr-1"})," Recibido"]}):(0,s.jsx)(O.E,{variant:"outline",children:"Pendiente"}),(e.recepcionDCLastUpdatedAt||e.recepcionDCLastUpdatedBy)&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,s.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,s.jsxs)(U.ZI,{className:"text-xs",children:[(0,s.jsx)("p",{children:"\xdaltima actualizaci\xf3n (Recep. Doc.):"}),e.recepcionDCLastUpdatedBy&&(0,s.jsxs)("p",{children:["Por: ",e.recepcionDCLastUpdatedBy]}),e.recepcionDCLastUpdatedAt&&e.recepcionDCLastUpdatedAt instanceof Date&&(0,s.jsxs)("p",{children:["Fecha: ",(0,N.GP)(e.recepcionDCLastUpdatedAt,"Pp",{locale:S.es})]})]})]})})]})}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm",children:(e=>{let t=[];return(e.isMemorandum&&t.push((0,s.jsx)(O.E,{variant:"destructive",className:"whitespace-nowrap text-xs",children:"Memorandum"},"memo")),e.documentosAdjuntos&&t.push((0,s.jsx)(O.E,{variant:"outline",className:"bg-blue-100 text-blue-700 whitespace-nowrap text-xs",children:"Docs Adjuntos"},"docs")),e.soporte&&t.push((0,s.jsx)(O.E,{variant:"outline",className:"bg-amber-100 text-amber-700 whitespace-nowrap text-xs",children:"Soporte"},"soporte")),e.impuestosPendientesCliente&&t.push((0,s.jsx)(O.E,{variant:"outline",className:"bg-red-100 text-red-700 whitespace-nowrap text-xs",children:"Imp. Pendientes"},"impuestos")),e.constanciasNoRetencion&&t.push((0,s.jsx)(O.E,{variant:"outline",className:"bg-purple-100 text-purple-700 whitespace-nowrap text-xs",children:"Const. No Ret."},"retencion")),e.pagoServicios&&t.push((0,s.jsx)(O.E,{variant:"outline",className:"bg-teal-100 text-teal-700 whitespace-nowrap text-xs",children:"Pago Serv."},"servicios")),0===t.length)?(0,s.jsx)(O.E,{variant:"secondary",className:"text-xs",children:"Sin Estados"}):(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:t})})(e)}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:e.consignatario&&e.consignatario.length>21?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"".concat(e.consignatario.substring(0,21),"...")}),(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0",children:(0,s.jsx)(V.A,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),(0,s.jsx)(U.ZI,{className:"text-xs max-w-xs break-words",children:(0,s.jsx)("p",{children:e.consignatario})})]})})]}):e.consignatario||"N/A"}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:e.declaracionNumero||"N/A"}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:e.examDate instanceof Date?(0,N.GP)(e.examDate,"dd/MM/yy",{locale:S.es}):"N/A"}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:e.examNe}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:((e,t)=>{if(null==e||""===e)return"N/A";let a=Number(e);if(isNaN(a)&&"string"==typeof e&&""===e.trim())return"N/A";if(isNaN(a))return String(e);let s="";return"cordoba"===t?s="C$":"dolar"===t?s="US$":"euro"===t&&(s="€"),"".concat(s).concat(a.toFixed(2))})(null!=(i=e.monto)?i:void 0,e.montoMoneda||void 0)}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:e.examReference||"N/A"}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm text-muted-foreground",children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{children:e.savedBy||"N/A"}),e.savedAt&&e.savedAt instanceof Date&&(0,s.jsx)(U.Bc,{children:(0,s.jsxs)(U.m_,{children:[(0,s.jsx)(U.k$,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,s.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,s.jsxs)(U.ZI,{className:"text-xs",children:[(0,s.jsx)("p",{children:"Guardado el:"}),(0,s.jsx)("p",{children:(0,N.GP)(e.savedAt,"Pp",{locale:S.es})})]})]})})]})}),(0,s.jsx)(L.nA,{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-foreground",children:e.solicitudId})]},e.solicitudId)})})]})})})]})};var ea=a(26615),es=a(72845),er=a(17037);function ei(e){let{solicitud:t,isOpen:a,onClose:i}=e,[n,o]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{t?o(!1):o(!0)},[t]),a)?(0,s.jsx)(M.lG,{open:a,onOpenChange:i,children:(0,s.jsxs)(M.Cf,{className:"max-w-4xl p-0 h-[90vh] flex flex-col",children:[(0,s.jsxs)(M.c7,{className:"sr-only",children:[(0,s.jsx)(M.L3,{children:"Detalles de la Solicitud"}),(0,s.jsx)(M.rr,{children:"Contenido detallado de la solicitud de pago seleccionada."})]}),n?(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)(x.A,{className:"h-8 w-8 animate-spin"})}):t?(0,s.jsx)(er.F,{className:"flex-grow",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(es.A,{solicitud:t,isInlineView:!0,onBackToList:i,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:i,className:"absolute top-4 right-4",children:(0,s.jsx)(ea.A,{className:"h-5 w-5"})})})})}):(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No se pudo cargar la solicitud."})})]})}):null}function en(){let{user:e,loading:t}=(0,n.A)();(0,i.useRouter)();let{toast:a}=(0,I.dj)(),[L,F]=(0,r.useState)("dateToday"),[U,O]=(0,r.useState)(""),[B,$]=(0,r.useState)(void 0),[G,_]=(0,r.useState)(void 0),[T,q]=(0,r.useState)(void 0),[z,H]=(0,r.useState)(!1),[Z,V]=(0,r.useState)(!1),[W,J]=(0,r.useState)(!1),[Q,K]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(null),[ee,ea]=(0,r.useState)(null),[es,er]=(0,r.useState)(!1),[en,eo]=(0,r.useState)(""),[el,ec]=(0,r.useState)(!1),[ed,eu]=(0,r.useState)(null),[em,ex]=(0,r.useState)([]),[ep,eh]=(0,r.useState)(""),[ef,ej]=(0,r.useState)(!1),[eg,ev]=(0,r.useState)(!1),[eN,ey]=(0,r.useState)(!1),[eb,ew]=(0,r.useState)(!1),[eC,eS]=(0,r.useState)(null),[eA,eD]=(0,r.useState)(""),[eE,eP]=(0,r.useState)(!1),[eM,eI]=(0,r.useState)(null),[ek,eR]=(0,r.useState)(""),[eL,eF]=(0,r.useState)(!1),[eU,eO]=(0,r.useState)(null),[eB,e$]=(0,r.useState)("pendientes"),[eG,e_]=(0,r.useState)("desc"),[eT,eq]=(0,r.useState)(""),[ez,eH]=(0,r.useState)(""),[eZ,eV]=(0,r.useState)(""),[eW,eJ]=(0,r.useState)(""),[eQ,eK]=(0,r.useState)(""),[eY,eX]=(0,r.useState)(""),[e0,e1]=(0,r.useState)(""),[e4,e3]=(0,r.useState)(""),[e5,e2]=(0,r.useState)(""),[e7,e6]=(0,r.useState)(""),[e8,e9]=(0,r.useState)(""),[te,tt]=(0,r.useState)(""),[ta,ts]=(0,r.useState)(null),[tr,ti]=(0,r.useState)(!1),[tn,to]=(0,r.useState)(new Map),[tl,tc]=(0,r.useState)(!0),[td,tu]=(0,r.useState)([]),[tm,tx]=(0,r.useState)([]),[tp,th]=(0,r.useState)(!1),[tf,tj]=(0,r.useState)("");(0,r.useEffect)(()=>{er(!0)},[]),(0,r.useEffect)(()=>{let t=async()=>{if(!e)return;let t=(0,g.H9)(j.db,"users",e.uid),a=await (0,g.x7)(t);a.exists()&&!1===a.data().isMinutaValidationEnabled&&tc(!1)};e&&t()},[e]);let tg=(0,r.useMemo)(()=>{if(!ee)return null;let t=[...ee];"pendientes"===eB?t=t.filter(e=>"Pagado"!==e.paymentStatus):"pagadas"===eB&&(t=t.filter(e=>"Pagado"===e.paymentStatus));let a=(e,t,a)=>{if(!t.trim())return e;let s=t.toLowerCase().trim();return e.filter(e=>a(e,s))};return t=a(t,eT,(e,t)=>(e.recepcionDCStatus?"recibido":"pendiente").includes(t)),t=a(t,ez,(e,t)=>(e.emailMinutaStatus?"notificado":"pendiente").includes(t)),t=a(t,eZ,(e,t)=>e.solicitudId.toLowerCase().includes(t)),t=a(t,eY,(e,t)=>(e.examDate&&e.examDate instanceof Date?(0,N.GP)(e.examDate,"dd/MM/yy",{locale:S.es}):"N/A").toLowerCase().includes(t)),t=a(t,eW,(e,t)=>(e.examNe||"").toLowerCase().includes(t)),t=a(t,eQ,(e,t)=>(e.paymentStatus||"pendiente").toLowerCase().includes(t)),t=a(t,e0,(e,t)=>String(e.monto||"").toLowerCase().includes(t)),t=a(t,e4,(e,t)=>(e.consignatario||"").toLowerCase().includes(t)),t=a(t,e5,(e,t)=>(e.declaracionNumero||"").toLowerCase().includes(t)),t=a(t,e7,(e,t)=>(e.examReference||"").toLowerCase().includes(t)),(null==e?void 0:e.role)!=="autorevisor"&&(null==e?void 0:e.role)!=="autorevisor_plus"&&(t=a(t,e8,(e,t)=>(e.savedBy||"").toLowerCase().includes(t))),t.sort((e,t)=>{var a,s;let r=(null==(a=e.savedAt)?void 0:a.getTime())||0,i=(null==(s=t.savedAt)?void 0:s.getTime())||0;return"desc"===eG?i-r:r-i}),t},[ee,eT,ez,eZ,eY,eW,eQ,e0,e4,e5,e7,e8,null==e?void 0:e.role,eB,eG]),tv=(0,r.useCallback)(async(t,s)=>{if(!e||!e.email)return void a({title:"Error",description:"Usuario no autenticado.",variant:"destructive"});let r=(0,g.H9)(j.db,"SolicitudCheques",t);try{await (0,g.mZ)(r,{paymentStatus:s,paymentStatusLastUpdatedAt:(0,g.O5)(),paymentStatusLastUpdatedBy:e.email}),a({title:"\xc9xito",description:"Estado de pago actualizado para ".concat(t,".")}),ea(e=>e?e.map(e=>e.solicitudId===t?{...e,paymentStatus:s}:e):null)}catch(e){console.error("Error updating payment status: ",e),a({title:"Error",description:"No se pudo actualizar el estado de pago.",variant:"destructive"})}},[e,a]),tN=(0,r.useCallback)(async(t,a)=>{if(!e||!e.email)return;let s=(0,g.H9)(j.db,"SolicitudCheques",t);try{await (0,g.mZ)(s,{recepcionDCStatus:a,recepcionDCLastUpdatedAt:(0,g.O5)(),recepcionDCLastUpdatedBy:e.email}),ea(e=>e?e.map(e=>e.solicitudId===t?{...e,recepcionDCStatus:a}:e):null)}catch(e){console.error(e)}},[e]),ty=(0,r.useCallback)(async(t,a)=>{if(!e||!e.email)return;let s=(0,g.H9)(j.db,"SolicitudCheques",t);try{await (0,g.mZ)(s,{emailMinutaStatus:a,emailMinutaLastUpdatedAt:(0,g.O5)(),emailMinutaLastUpdatedBy:e.email}),ea(e=>e?e.map(e=>e.solicitudId===t?{...e,emailMinutaStatus:a}:e):null)}catch(e){console.error(e)}},[e]),tb=async()=>{if(!eC||!eA.trim())return void a({title:"Error",description:"El mensaje no puede estar vac\xedo.",variant:"destructive"});await tv(eC,"Error: ".concat(eA.trim())),ew(!1),eS(null)},tw=async(t,s)=>{if(!e||!e.email)return;let r=(0,g.H9)(j.db,"SolicitudCheques",t);try{await (0,g.mZ)(r,{paymentStatus:"Pagado",minutaNumber:s||null,paymentStatusLastUpdatedAt:(0,g.O5)(),paymentStatusLastUpdatedBy:e.email});let i=null==ee?void 0:ee.find(e=>e.solicitudId===t);if(i){let a={...i,paymentStatus:"Pagado",minutaNumber:s||null};a.isMemorandum?(a.rhPaymentStatus="pagado_efectivo",a.rhStatusLastUpdatedAt=new Date,a.rhStatusLastUpdatedBy=e.email,a.rhPaymentDate=new Date):(a.emailMinutaStatus=!0,a.emailMinutaLastUpdatedAt=new Date,a.emailMinutaLastUpdatedBy=e.email,a.recepcionDCStatus=!0,a.recepcionDCLastUpdatedAt=new Date,a.recepcionDCLastUpdatedBy=e.email),ea(e=>e?e.map(e=>e.solicitudId===t?a:e):null)}a({title:"\xc9xito",description:"Estado de pago actualizado a 'Pagado' para ".concat(t,".")})}catch(e){console.error("Error updating minuta: ",e),a({title:"Error",description:"No se pudo actualizar la minuta.",variant:"destructive"})}},tC=async()=>{eM&&(await tw(eM,ek),eP(!1),eI(null))},tS=async e=>{eu(e),ey(!1),ex([]),ej(!0),ec(!0);let t=null;for(let a of["SolicitudCheques","Memorandum"]){let s=(0,g.H9)(j.db,a,e);if((await (0,g.x7)(s)).exists()){t=a;break}}if(!t){a({title:"Error",description:"No se encontr\xf3 la solicitud para cargar comentarios.",variant:"destructive"}),ej(!1);return}try{let a=(0,g.rJ)(j.db,t,e,"comments"),s=(0,g.P)(a,(0,g.My)("createdAt","asc")),r=(await (0,g.GG)(s)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt instanceof g.Dc?t.createdAt.toDate():new Date}});ex(r)}catch(e){console.error("Error fetching comments: ",e),a({title:"Error",description:"No se pudieron cargar los comentarios.",variant:"destructive"}),ex([])}finally{ej(!1)}},tA=()=>{ec(!1),eu(null),eh(""),ey(!1),ex([])},tD=async()=>{if(!ep.trim()||!ed||!e||!e.email)return void a({title:"Error",description:"El comentario no puede estar vac\xedo o falta informaci\xf3n del usuario/solicitud.",variant:"destructive"});ev(!0);let t=null;for(let e of["SolicitudCheques","Memorandum"]){let a=(0,g.H9)(j.db,e,ed);if((await (0,g.x7)(a)).exists()){t=e;break}}if(!t){a({title:"Error",description:"No se encontr\xf3 la solicitud para a\xf1adir el comentario.",variant:"destructive"}),ev(!1);return}try{let s,r=(0,g.rJ)(j.db,t,ed,"comments"),i={solicitudId:ed,text:ep.trim(),userId:e.uid,userEmail:e.email,createdAt:(0,g.O5)()},n=await (0,g.gS)(r,i);if(eN){let e=(0,g.H9)(j.db,t,ed);await (0,g.mZ)(e,{hasOpenUrgentComment:!0}),s=!0}ex(e=>[...e,{...i,id:n.id,createdAt:new Date}]),eh(""),ey(!1),a({title:"\xc9xito",description:"Comentario publicado."}),ea(e=>(null==e?void 0:e.map(e=>{if(e.solicitudId===ed){var t;let a={...e,commentsCount:(null!=(t=e.commentsCount)?t:0)+1};return void 0!==s&&(a.hasOpenUrgentComment=s),a}return e}))||null)}catch(e){console.error("Error posting comment: ",e),a({title:"Error",description:"No se pudo publicar el comentario.",variant:"destructive"})}finally{ev(!1)}},tE=async()=>{if(!eU||(null==e?void 0:e.role)!=="admin"||!e.email){a({title:"Error",description:"No se pudo eliminar la solicitud o acci\xf3n no autorizada.",variant:"destructive"}),eF(!1);return}let t=null;for(let e of["SolicitudCheques","Memorandum"]){let a=(0,g.H9)(j.db,e,eU);if((await (0,g.x7)(a)).exists()){t=e;break}}if(!t){a({title:"Error",description:"La solicitud ".concat(eU," no se encontr\xf3 en ninguna colecci\xf3n."),variant:"destructive"}),eF(!1);return}let s=(0,g.H9)(j.db,t,eU);try{let t=await (0,g.x7)(s);if(!t.exists()){a({title:"Error",description:"La solicitud ".concat(eU," no existe."),variant:"destructive"}),eF(!1);return}let r=t.data(),i=(0,g.H9)(j.db,"Eliminaciones",eU),n=(0,g.H9)((0,g.rJ)(j.db,"Eliminaciones",eU,"AuditTrail")),o={action:"deleted",deletedBy:e.email,deletedAt:(0,g.O5)()},l=(0,g.wP)(j.db);l.set(i,r),l.set(n,o),l.delete(s),await l.commit(),a({title:"\xc9xito",description:"Solicitud ".concat(eU," eliminada y archivada.")}),ea(e=>e?e.filter(e=>e.solicitudId!==eU):null)}catch(e){console.error("Error deleting and archiving document:",e),a({title:"Error",description:"No se pudo completar la eliminaci\xf3n y archivado.",variant:"destructive"})}finally{eF(!1),eO(null)}};(0,r.useEffect)(()=>{er(!0)},[]),(0,r.useEffect)(()=>{if(es&&!t&&(null==e?void 0:e.email)){if("autorevisor"===e.role)e9(e.email);else if("autorevisor_plus"===e.role){let t=e.canReviewUserEmails&&e.canReviewUserEmails.length>0?", ".concat(e.canReviewUserEmails.join(", ")):"";e9("".concat(e.email).concat(t))}}},[es,t,e]);let tP=(0,r.useCallback)(async t=>{var s,r;let i=null==t?void 0:t.event,n=null!=(s=null==t?void 0:t.preserveFilters)&&s;if(i&&i.preventDefault(),!e)return void a({title:"No autenticado",description:"Debe iniciar sesi\xf3n para buscar.",variant:"destructive"});K(!0),X(null),ea(null),eo(""),ts(null),n||(eV(""),eX(""),eJ(""),e1(""),e3(""),e2(""),e6(""),(null==e?void 0:e.role)!=="autorevisor"&&(null==e?void 0:e.role)!=="autorevisor_plus"&&e9(""),eK(""),eq(""),eH(""),tt(""));let o=[];try{let t=null;if(e.role&&["ejecutivo","revisor","autorevisor_plus","coordinadora"].includes(e.role)){let a=Array.from(new Set([e.email,...(null==(r=e.visibilityGroup)?void 0:r.map(e=>e.email))||[]])).filter(Boolean);t=a.length>0?(0,g._M)("savedBy","in",a):(0,g._M)("savedBy","==",e.email)}else"autorevisor"===e.role&&(t=(0,g._M)("savedBy","==",e.email));let a=[],s=U.trim();switch(L){case"dateToday":let i=(0,y.o)(new Date),n=(0,b.D)(new Date);a.push((0,g._M)("examDate",">=",g.Dc.fromDate(i))),a.push((0,g._M)("examDate","<=",g.Dc.fromDate(n))),s=(0,N.GP)(new Date,"PPP",{locale:S.es});break;case"dateCurrentMonth":let l=(0,w.w)(new Date),c=(0,C.p)(new Date);a.push((0,g._M)("examDate",">=",g.Dc.fromDate(l))),a.push((0,g._M)("examDate","<=",g.Dc.fromDate(c))),s=(0,N.GP)(new Date,"MMMM yyyy",{locale:S.es});break;case"dateSpecific":if(!B){X("Por favor, seleccione una fecha espec\xedfica."),K(!1);return}let d=(0,y.o)(B),u=(0,b.D)(B);a.push((0,g._M)("examDate",">=",g.Dc.fromDate(d))),a.push((0,g._M)("examDate","<=",g.Dc.fromDate(u))),s=(0,N.GP)(B,"PPP",{locale:S.es});break;case"dateRange":if(!G||!T){X("Por favor, seleccione un rango de fechas (inicio y fin)."),K(!1);return}if(G>T){X("La fecha de inicio no puede ser posterior a la fecha de fin."),K(!1);return}let m=(0,y.o)(G),x=(0,b.D)(T);a.push((0,g._M)("examDate",">=",g.Dc.fromDate(m))),a.push((0,g._M)("examDate","<=",g.Dc.fromDate(x))),s="Rango: ".concat((0,N.GP)(G,"dd/MM/yy",{locale:S.es})," - ").concat((0,N.GP)(T,"dd/MM/yy",{locale:S.es}));break;default:X("Tipo de b\xfasqueda no v\xe1lido."),K(!1);return}for(let e of(eo(s),["SolicitudCheques","Memorandum"])){let s=[...a,(0,g.My)("examDate","desc")];t&&s.unshift(t);let r=(0,g.P)((0,g.rJ)(j.db,e),...s),i=await (0,g.GG)(r),n=new Set,l=i.docs.map(async e=>{if(n.has(e.id))return null;n.add(e.id);let t=e.data(),a=t.examDate instanceof g.Dc?t.examDate.toDate():t.examDate instanceof Date?t.examDate:void 0,s=t.savedAt instanceof g.Dc?t.savedAt.toDate():t.savedAt instanceof Date?t.savedAt:void 0,r=t.rhPaymentDate instanceof g.Dc?t.rhPaymentDate.toDate():t.rhPaymentDate instanceof Date?t.rhPaymentDate:void 0,i=t.rhPaymentStartDate instanceof g.Dc?t.rhPaymentStartDate.toDate():t.rhPaymentStartDate instanceof Date?t.rhPaymentStartDate:void 0,o=t.rhPaymentEndDate instanceof g.Dc?t.rhPaymentEndDate.toDate():t.rhPaymentEndDate instanceof Date?t.rhPaymentEndDate:void 0,l=0;try{let t=(0,g.rJ)(j.db,e.ref.path,"comments");l=(await (0,g.d_)(t)).data().count}catch(t){console.error("Error fetching comments count for ".concat(e.id,": "),t)}return{...t,solicitudId:e.id,examDate:a,savedAt:s,rhPaymentDate:r,rhPaymentStartDate:i,rhPaymentEndDate:o,commentsCount:l}}),c=(await Promise.all(l)).filter(Boolean);o.push(...c)}o.length>0?ea(o):(X("No se encontraron solicitudes para los criterios ingresados."),ea([]))}catch(t){console.error("Error fetching documents from Firestore: ",t);let e="Error al buscar las solicitudes. Intente de nuevo.";"permission-denied"===t.code?e="No tiene permisos para acceder a esta informaci\xf3n.":("failed-precondition"===t.code||t.message&&t.message.toLowerCase().includes("index"))&&(e="Error de consulta: Es posible que se requiera un \xedndice compuesto en Firestore que no existe. Por favor, revise la consola del navegador para ver un enlace que permita crear el \xedndice necesario.",a({title:"\xcdndice Requerido",description:"Es posible que necesite crear un \xedndice compuesto en Firestore. Revise la consola del navegador (F12) para m\xe1s detalles.",variant:"destructive",duration:1e4})),X(e)}finally{K(!1)}},[e,L,B,G,T,a,U]),tM=async()=>{let e=tg||[];if(0===e.length)return void a({title:"Sin Datos",description:"No hay datos para exportar. Realice una b\xfasqueda primero.",variant:"default"});ti(!0),a({title:"Exportando...",description:"Preparando datos para Excel, esto puede tardar unos segundos...",duration:1e4});let t=e.map(async e=>{let t="N/A";if(e.commentsCount&&e.commentsCount>0){let a="SolicitudCheques",s=(0,g.H9)(j.db,a,e.solicitudId);(await (0,g.x7)(s)).exists()||(a="Memorandum");try{let s=(0,g.rJ)(j.db,a,e.solicitudId,"comments"),r=(0,g.P)(s,(0,g.My)("createdAt","asc")),i=await (0,g.GG)(r);i.empty||(t=i.docs.map(e=>{let t=e.data(),a=t.createdAt instanceof g.Dc?t.createdAt.toDate():new Date;return"".concat(t.userEmail," - ").concat((0,N.GP)(a,"dd/MM/yy HH:mm",{locale:S.es}),": ").concat(t.text)}).join("\n"))}catch(a){console.error("Error fetching comments for ".concat(e.solicitudId,": "),a),t="Error al cargar comentarios"}}else 0===e.commentsCount&&(t="Sin comentarios");return{"Estado Pago":e.paymentStatus||"Pendiente","ID Solicitud":e.solicitudId,Fecha:e.examDate instanceof Date?(0,N.GP)(e.examDate,"yyyy-MM-dd HH:mm",{locale:S.es}):"N/A",NE:e.examNe,Monto:e.monto,"Moneda Monto":e.montoMoneda,Consignatario:e.consignatario||"N/A",Declaracion:e.declaracionNumero||"N/A",Referencia:e.examReference||"N/A","Guardado Por":e.savedBy||"N/A","Cantidad en Letras":e.cantidadEnLetras||"N/A","Destinatario Solicitud":e.examRecipient,"Unidad Recaudadora":e.unidadRecaudadora||"N/A","C\xf3digo 1":e.codigo1||"N/A","Codigo MUR":e.codigo2||"N/A",Banco:"ACCION POR CHEQUE/NO APLICA BANCO"===e.banco?"Acci\xf3n por Cheque / No Aplica Banco":e.banco||"N/A","Otro Banco":"Otros"===e.banco&&e.bancoOtros||"N/A","N\xfamero de Cuenta":"ACCION POR CHEQUE/NO APLICA BANCO"===e.banco?"N/A":e.numeroCuenta||"N/A","Moneda de la Cuenta":"ACCION POR CHEQUE/NO APLICA BANCO"===e.banco?"N/A":"Otros"===e.monedaCuenta?e.monedaCuentaOtros||"N/A":e.monedaCuenta||"N/A","Otra Moneda Cuenta":"Otros"===e.monedaCuenta&&e.monedaCuentaOtros||"N/A","Elaborar Cheque A":e.elaborarChequeA||"N/A","Elaborar Transferencia A":e.elaborarTransferenciaA||"N/A","Impuestos Pagados Cliente":e.impuestosPagadosCliente?"S\xed":"No","R/C (Imp. Pagados)":e.impuestosPagadosCliente&&e.impuestosPagadosRC||"N/A","T/B (Imp. Pagados)":e.impuestosPagadosCliente&&e.impuestosPagadosTB||"N/A","Cheque (Imp. Pagados)":e.impuestosPagadosCliente&&e.impuestosPagadosCheque||"N/A","Impuestos Pendientes Cliente":e.impuestosPendientesCliente?"S\xed":"No",Soporte:e.soporte?"S\xed":"No","Documentos Adjuntos":e.documentosAdjuntos?"S\xed":"No","Constancias de No Retenci\xf3n":e.constanciasNoRetencion?"S\xed":"No","Constancia 1%":e.constanciasNoRetencion?e.constanciasNoRetencion1?"S\xed":"No":"N/A","Constancia 2%":e.constanciasNoRetencion?e.constanciasNoRetencion2?"S\xed":"No":"N/A","Pago de Servicios":e.pagoServicios?"S\xed":"No","Tipo de Servicio":e.pagoServicios&&("OTROS"===e.tipoServicio?e.otrosTipoServicio:e.tipoServicio)||"N/A","Otro Tipo de Servicio":e.pagoServicios&&"OTROS"===e.tipoServicio&&e.otrosTipoServicio||"N/A","Factura Servicio":e.pagoServicios&&e.facturaServicio||"N/A","Instituci\xf3n Servicio":e.pagoServicios&&e.institucionServicio||"N/A","Correo Notificaci\xf3n":e.correo||"N/A",Observación:e.observation||"N/A","Usuario (De)":e.examManager,"Fecha de Guardado":e.savedAt instanceof Date?(0,N.GP)(e.savedAt,"yyyy-MM-dd HH:mm:ss",{locale:S.es}):"N/A",Comentarios:t,"Comentario Urgente Abierto":e.hasOpenUrgentComment?"S\xed":"No",Memorandum:e.isMemorandum?"S\xed":"No"}});try{let e=await Promise.all(t);(0,v.cY)(e,["Estado Pago","ID Solicitud","Fecha","NE","Monto","Moneda Monto","Consignatario","Declaracion","Referencia","Guardado Por","Cantidad en Letras","Destinatario Solicitud","Unidad Recaudadora","C\xf3digo 1","Codigo MUR","Banco","Otro Banco","N\xfamero de Cuenta","Moneda de la Cuenta","Otra Moneda Cuenta","Elaborar Cheque A","Elaborar Transferencia A","Impuestos Pagados Cliente","R/C (Imp. Pagados)","T/B (Imp. Pagados)","Cheque (Imp. Pagados)","Impuestos Pendientes Cliente","Soporte","Documentos Adjuntos","Constancias de No Retenci\xf3n","Constancia 1%","Constancia 2%","Pago de Servicios","Tipo de Servicio","Otro Tipo de Servicio","Factura Servicio","Instituci\xf3n Servicio","Correo Notificaci\xf3n","Observaci\xf3n","Usuario (De)","Fecha de Guardado","Comentarios","Comentario Urgente Abierto","Memorandum"],"Reporte_Pagos_".concat(L,"_").concat(en.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".xlsx")),a({title:"Exportaci\xf3n Completa",description:"El archivo Excel se ha descargado."})}catch(e){console.error("Error during data export preparation: ",e),a({title:"Error de Exportaci\xf3n",description:"No se pudo preparar los datos para exportar.",variant:"destructive"})}finally{ti(!1)}};if(!es||t)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center grid-bg",children:(0,s.jsx)(x.A,{className:"h-12 w-12 animate-spin text-white"})});let tI=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="revisor",tk=(null==e?void 0:e.role)==="calificador",tR=(null==e?void 0:e.role)==="autorevisor"||(null==e?void 0:e.role)==="autorevisor_plus"||(null==e?void 0:e.role)==="revisor";return(0,s.jsxs)(o.G,{children:[(0,s.jsx)("div",{className:"py-2 md:py-5",children:(0,s.jsxs)(u.Zp,{className:"w-full custom-shadow",children:[(0,s.jsxs)(u.aR,{children:[(0,s.jsx)(u.ZB,{className:"text-2xl font-semibold text-foreground",children:"Base de Datos de Pagos"}),(0,s.jsx)(u.BT,{className:"text-muted-foreground",children:"Seleccione un tipo de b\xfasqueda e ingrese los criterios. Ahora las operaciones pagadas si liberan de la vista general usa filtros para verificar entre estados pendientes, pagadas o todas, segun la busqueda inicial."})]}),(0,s.jsxs)(u.Wu,{children:[(0,s.jsxs)("form",{onSubmit:e=>tP({event:e}),className:"space-y-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[(0,s.jsxs)(A.l6,{value:L,onValueChange:e=>{F(e),O(""),$(void 0),_(void 0),q(void 0),ea(null),X(null),eo("")},children:[(0,s.jsx)(A.bq,{className:"w-full sm:w-[200px] shrink-0",children:(0,s.jsx)(A.yv,{placeholder:"Tipo de b\xfasqueda"})}),(0,s.jsxs)(A.gC,{children:[(0,s.jsx)(A.eb,{value:"dateToday",children:"Por Fecha (Hoy)"}),(0,s.jsx)(A.eb,{value:"dateSpecific",children:"Por Fecha (Espec\xedfica)"}),(tI||tk)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.eb,{value:"dateCurrentMonth",children:"Por Mes (Actual)"}),(0,s.jsx)(A.eb,{value:"dateRange",children:"Por Rango de Fechas"})]})]})]}),(()=>{switch(L){case"dateToday":return(0,s.jsx)("p",{className:"text-sm text-muted-foreground flex-grow items-center flex h-10",children:"Se buscar\xe1n las solicitudes de hoy."});case"dateCurrentMonth":return(0,s.jsx)("p",{className:"text-sm text-muted-foreground flex-grow items-center flex h-10",children:"Se buscar\xe1n las solicitudes del mes actual."});case"dateSpecific":return(0,s.jsxs)(D.AM,{open:z,onOpenChange:H,children:[(0,s.jsx)(D.Wv,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",className:(0,k.cn)("w-full justify-start text-left font-normal flex-grow",!B&&"text-muted-foreground"),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),B?(0,N.GP)(B,"PPP",{locale:S.es}):(0,s.jsx)("span",{children:"Seleccione una fecha"})]})}),(0,s.jsx)(D.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(E.V,{mode:"single",selected:B,onSelect:e=>{$(e),H(!1)},initialFocus:!0,locale:S.es})})]});case"dateRange":return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 flex-grow",children:[(0,s.jsxs)(D.AM,{open:Z,onOpenChange:V,children:[(0,s.jsx)(D.Wv,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",className:(0,k.cn)("w-full justify-start text-left font-normal",!G&&"text-muted-foreground"),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),G?(0,N.GP)(G,"dd/MM/yy",{locale:S.es}):(0,s.jsx)("span",{children:"Fecha Inicio"})]})}),(0,s.jsx)(D.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(E.V,{mode:"single",selected:G,onSelect:e=>{_(e),V(!1)},initialFocus:!0,locale:S.es})})]}),(0,s.jsxs)(D.AM,{open:W,onOpenChange:J,children:[(0,s.jsx)(D.Wv,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",className:(0,k.cn)("w-full justify-start text-left font-normal",!T&&"text-muted-foreground"),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),T?(0,N.GP)(T,"dd/MM/yy",{locale:S.es}):(0,s.jsx)("span",{children:"Fecha Fin"})]})}),(0,s.jsx)(D.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(E.V,{mode:"single",selected:T,onSelect:e=>{q(e),J(!1)},initialFocus:!0,locale:S.es})})]})]});default:return null}})()]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)(l.$,{type:"submit",className:"btn-primary w-full sm:w-auto",disabled:Q,children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"})," ",Q?"Buscando...":"Ejecutar B\xfasqueda"]}),(0,s.jsxs)(l.$,{type:"button",onClick:tM,variant:"outline",className:"w-full sm:w-auto",disabled:!tg||Q||tg&&0===tg.length||tr,children:[tr?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),tr?"Exportando...":"Exportar Tabla"]}),(0,s.jsxs)(l.$,{type:"button",onClick:()=>e_(e=>"desc"===e?"asc":"desc"),variant:"outline",className:"w-full sm:w-auto",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"desc"===eG?"M\xe1s Recientes":"M\xe1s Antiguos"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 rounded-lg bg-secondary p-1",children:[(0,s.jsx)(l.$,{variant:"pendientes"===eB?"default":"ghost",onClick:()=>e$("pendientes"),size:"sm",children:"Pendientes"}),(0,s.jsx)(l.$,{variant:"pagadas"===eB?"default":"ghost",onClick:()=>e$("pagadas"),size:"sm",children:"Pagadas"}),(0,s.jsx)(l.$,{variant:"todas"===eB?"default":"ghost",onClick:()=>e$("todas"),size:"sm",children:"Todas"})]})]})]}),Q&&(0,s.jsxs)("div",{className:"flex justify-center items-center py-6",children:[(0,s.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Cargando solicitudes..."})]}),Y&&!Q&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-destructive/10 text-destructive border border-destructive/30 rounded-md text-center",children:Y}),tg&&!Q&&(0,s.jsx)(et,{solicitudes:tg,searchType:L,searchTerm:en,currentUserRole:null==e?void 0:e.role,isMinutaValidationEnabled:tl,onUpdatePaymentStatus:tv,onUpdateRecepcionDCStatus:tN,onUpdateEmailMinutaStatus:ty,onOpenMessageDialog:e=>{eS(e),eD(""),ew(!0)},onSaveMinuta:tw,onViewDetails:e=>{ts(e)},onOpenCommentsDialog:tS,onDeleteSolicitud:t=>{if((null==e?void 0:e.role)!=="admin")return void a({title:"Error",description:"No tiene permisos para eliminar solicitudes.",variant:"destructive"});eO(t),eF(!0)},onRefreshSearch:()=>tP({preserveFilters:!0}),filterRecpDocsInput:eT,setFilterRecpDocsInput:eq,filterNotMinutaInput:ez,setFilterNotMinutaInput:eH,filterSolicitudIdInput:eZ,setFilterSolicitudIdInput:eV,filterNEInput:eW,setFilterNEInput:eJ,filterEstadoPagoInput:eQ,setFilterEstadoPagoInput:eK,filterFechaSolicitudInput:eY,setFilterFechaSolicitudInput:eX,filterMontoInput:e0,setFilterMontoInput:e1,filterConsignatarioInput:e4,setFilterConsignatarioInput:e3,filterDeclaracionInput:e5,setFilterDeclaracionInput:e2,filterReferenciaInput:e7,setFilterReferenciaInput:e6,filterGuardadoPorInput:e8,setFilterGuardadoPorInput:e9,filterEstadoSolicitudInput:te,setFilterEstadoSolicitudInput:tt,duplicateSets:tn,onResolveDuplicate:()=>{},resolvedDuplicateKeys:td,permanentlyResolvedDuplicateKeys:tm,onOpenViewErrorDialog:e=>{tj(e),th(!0)},onFilterByDuplicateSet:()=>{}}),!ee&&!Q&&!Y&&!en&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-blue-500/10 text-blue-700 border border-blue-500/30 rounded-md text-center",children:"Seleccione un tipo de b\xfasqueda e ingrese los criterios para ver resultados."}),ee&&0===ee.length&&!Q&&!Y&&en&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-yellow-500/10 text-yellow-700 border border-yellow-500/30 rounded-md text-center",children:"No se encontraron solicitudes para los criterios de b\xfasqueda ingresados."})]})]})}),ta&&(0,s.jsx)(ei,{solicitud:ta,isOpen:!!ta,onClose:()=>{ts(null)}}),(0,s.jsx)(M.lG,{open:el,onOpenChange:tA,children:(0,s.jsxs)(M.Cf,{className:"sm:max-w-2xl",children:[(0,s.jsxs)(M.c7,{children:[(0,s.jsxs)(M.L3,{children:["Comentarios para Solicitud ID: ",ed]}),(0,s.jsx)(M.rr,{children:"Ver y a\xf1adir comentarios para esta solicitud."})]}),(0,s.jsxs)("div",{className:"py-4 space-y-4",children:[(0,s.jsx)("div",{className:"h-60 overflow-y-auto border p-2 rounded-md bg-muted/20 space-y-2",children:ef?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,s.jsx)(x.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2 text-sm text-muted-foreground",children:"Cargando comentarios..."})]}):0===em.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay comentarios a\xfan."}):em.map(e=>(0,s.jsxs)("div",{className:"p-2 my-1 border-b bg-card shadow-sm rounded",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("p",{className:"font-semibold text-primary text-xs",children:e.userEmail}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:(0,N.GP)(e.createdAt,"dd/MM/yyyy HH:mm",{locale:S.es})})]}),(0,s.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.text})]},e.id))}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"newCommentTextarea",className:"text-sm font-medium text-foreground",children:"Nuevo Comentario:"}),(0,s.jsx)(d.T,{id:"newCommentTextarea",value:ep,onChange:e=>eh(e.target.value),placeholder:"Escriba su comentario aqu\xed...",rows:3,className:"mt-1",disabled:eg})]}),tR&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)(P.S,{id:"urgentCommentCheckbox",checked:eN,onCheckedChange:e=>ey(!!e),disabled:eg}),(0,s.jsx)(R.J,{htmlFor:"urgentCommentCheckbox",className:"text-sm font-medium text-amber-700 dark:text-amber-500 cursor-pointer",children:"Indicar que la operaci\xf3n requiere atenci\xf3n especial"})]})]}),(0,s.jsxs)(M.Es,{children:[(0,s.jsx)(l.$,{variant:"outline",onClick:tA,disabled:eg,children:"Salir"}),(0,s.jsxs)(l.$,{onClick:tD,disabled:eg||!ep.trim(),children:[eg&&(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),eg?"Publicando...":"Publicar Comentario"]})]})]})}),(0,s.jsx)(M.lG,{open:eL,onOpenChange:eF,children:(0,s.jsxs)(M.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(M.c7,{children:(0,s.jsx)(M.L3,{children:"Confirmar Eliminaci\xf3n"})}),(0,s.jsx)(M.rr,{children:"Estas seguro de realizar esta opci\xf3n. Operacion de borrar es permanente. La solicitud sera archivada."}),(0,s.jsxs)(M.Es,{className:"mt-4",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>{eF(!1),eO(null)},children:"Cancelar"}),(0,s.jsx)(l.$,{variant:"destructive",onClick:tE,children:"Aceptar"})]})]})}),(0,s.jsx)(M.lG,{open:eb,onOpenChange:ew,children:(0,s.jsxs)(M.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(M.c7,{children:(0,s.jsx)(M.L3,{children:"A\xf1adir Mensaje de Error"})}),(0,s.jsx)(d.T,{value:eA,onChange:e=>eD(e.target.value),placeholder:"Describa el error..."}),(0,s.jsx)(M.Es,{children:(0,s.jsx)(l.$,{onClick:tb,children:"Guardar Error"})})]})}),(0,s.jsx)(M.lG,{open:tp,onOpenChange:th,children:(0,s.jsxs)(M.Cf,{children:[(0,s.jsx)(M.c7,{children:(0,s.jsx)(M.L3,{children:"Error Reportado"})}),(0,s.jsx)("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:tf}),(0,s.jsx)(M.Es,{children:(0,s.jsx)(l.$,{onClick:()=>th(!1),children:"Cerrar"})})]})}),(0,s.jsx)(M.lG,{open:eE,onOpenChange:eP,children:(0,s.jsxs)(M.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(M.c7,{children:[(0,s.jsx)(M.L3,{children:"Confirmar Pago"}),(0,s.jsx)(M.rr,{children:"Ingrese el n\xfamero de minuta para confirmar el pago."})]}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)(R.J,{htmlFor:"minuta-input",children:"N\xfamero de Minuta"}),(0,s.jsx)(c.p,{id:"minuta-input",value:ek,onChange:e=>eR(e.target.value),placeholder:"Opcional"})]}),(0,s.jsxs)(M.Es,{children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>eP(!1),children:"Cancelar"}),(0,s.jsx)(l.$,{onClick:tC,children:"Confirmar Pago"})]})]})})]})}},13496:(e,t,a)=>{"use strict";a.d(t,{$m:()=>d,As:()=>c,nD:()=>l,ub:()=>u});var s=a(95155),r=a(12115),i=a(16083),n=a(59007),o=a(64269);let l=i.bL,c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.q7,{ref:t,className:(0,o.cn)("border-b",a),...r})});c.displayName="AccordionItem";let d=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsx)(i.Y9,{className:"flex",children:(0,s.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...l,children:[r,(0,s.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.l9.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(i.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,s.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",a),children:r})})});u.displayName=i.UC.displayName},44385:(e,t,a)=>{"use strict";a.d(t,{a:()=>r});var s=a(12115);function r(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}},44846:(e,t,a)=>{"use strict";a.d(t,{d:()=>o});var s=a(95155),r=a(12115),i=a(27599),n=a(64269);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=i.bL.displayName},88291:(e,t,a)=>{Promise.resolve().then(a.bind(a,13391))}},e=>{e.O(0,[2992,7138,3524,4865,2130,3744,5282,9351,6505,1042,1627,5479,5171,7686,5669,8441,1255,7358],()=>e(e.s=88291)),_N_E=e.O()}]);