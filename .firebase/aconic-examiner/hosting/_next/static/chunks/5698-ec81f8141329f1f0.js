"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5698],{9891:(e,r,a)=>{a.d(r,{d:()=>t});let t=new(a(65240)).EventEmitter},27339:(e,r,a)=>{a.d(r,{l:()=>m});var t=a(95155),s=a(12115),o=a(5282),n=a(80160),i=a(28127),l=a(64269),d=a(3998),c=a(50276),u=a(26333);function m(e){let{className:r,date:a,onDateChange:m,disabled:p=!1}=e,[f,x]=s.useState(!1),[h,y]=s.useState(a);return s.useEffect(()=>{y(a)},[a]),(0,t.jsx)("div",{className:(0,l.cn)("grid gap-2",r),children:(0,t.jsxs)(u.AM,{open:f,onOpenChange:x,children:[(0,t.jsx)(u.Wv,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",disabled:p,className:(0,l.cn)("w-[180px] justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),h?(0,o.GP)(h,"dd/MM/yy",{locale:n.es}):(0,t.jsx)("span",{children:"Seleccione fecha"})]})}),(0,t.jsx)(u.hl,{className:"w-auto p-0",children:(0,t.jsx)(c.V,{mode:"single",selected:null!=h?h:void 0,onSelect:e=>{y(e),m(e),x(!1)},initialFocus:!0,locale:n.es,disabled:p})})]})})}},41052:(e,r,a)=>{a.d(r,{C5:()=>y,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>d,zB:()=>u});var t=a(95155),s=a(12115),o=a(32467),n=a(22544),i=a(64269),l=a(76444);let d=n.Op,c=s.createContext({}),u=e=>{let{...r}=e;return(0,t.jsx)(c.Provider,{value:{name:r.name},children:(0,t.jsx)(n.xI,{...r})})},m=()=>{let e=s.useContext(c),r=s.useContext(p),{getFieldState:a,formState:t}=(0,n.xW)(),o=a(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...o}},p=s.createContext({}),f=s.forwardRef((e,r)=>{let{className:a,...o}=e,n=s.useId();return(0,t.jsx)(p.Provider,{value:{id:n},children:(0,t.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",a),...o})})});f.displayName="FormItem";let x=s.forwardRef((e,r)=>{let{className:a,...s}=e,{error:o,formItemId:n}=m();return(0,t.jsx)(l.J,{ref:r,className:(0,i.cn)(o&&"text-destructive",a),htmlFor:n,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,r)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:l}=m();return(0,t.jsx)(o.DX,{ref:r,id:n,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...a})});h.displayName="FormControl",s.forwardRef((e,r)=>{let{className:a,...s}=e,{formDescriptionId:o}=m();return(0,t.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let y=s.forwardRef((e,r)=>{var a;let{className:s,children:o,...n}=e,{error:l,formMessageId:d}=m(),c=l?String(null!=(a=null==l?void 0:l.message)?a:""):o;return c?(0,t.jsx)("p",{ref:r,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});y.displayName="FormMessage"},50276:(e,r,a)=>{a.d(r,{V:()=>d});var t=a(95155);a(12115);var s=a(51190),o=a(63263),n=a(75196),i=a(64269),l=a(3998);function d(e){let{className:r,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,t.jsx)(n.hv,{showOutsideDays:d,className:(0,i.cn)("p-3",r),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:r,...a}=e;return(0,t.jsx)(s.A,{className:(0,i.cn)("h-4 w-4",r),...a})},IconRight:e=>{let{className:r,...a}=e;return(0,t.jsx)(o.A,{className:(0,i.cn)("h-4 w-4",r),...a})}},...c})}d.displayName="Calendar"},63817:(e,r,a)=>{a.d(r,{G7:()=>d,L$:()=>m,h_:()=>p,oI:()=>c,uB:()=>l,xL:()=>u});var t=a(95155),s=a(12115),o=a(41808),n=a(90109),i=a(64269);a(51834);let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(o.uB,{ref:r,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s})});l.displayName=o.uB.displayName;let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(o.uB.Input,{ref:r,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]})});d.displayName=o.uB.Input.displayName;let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(o.uB.List,{ref:r,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s})});c.displayName=o.uB.List.displayName;let u=s.forwardRef((e,r)=>(0,t.jsx)(o.uB.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));u.displayName=o.uB.Empty.displayName;let m=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(o.uB.Group,{ref:r,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s})});m.displayName=o.uB.Group.displayName,s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(o.uB.Separator,{ref:r,className:(0,i.cn)("-mx-1 h-px bg-border",a),...s})}).displayName=o.uB.Separator.displayName;let p=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(o.uB.Item,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50",a),...s})});p.displayName=o.uB.Item.displayName},79505:(e,r,a)=>{a.d(r,{d:()=>y});var t=a(95155),s=a(12115),o=a(92033),n=a(73180),i=a(30848),l=a(72251),d=a(64269),c=a(3998),u=a(63817),m=a(26333),p=a(54901),f=a(14585),x=a(19708),h=a(15894);function y(e){let{value:r,onChange:a}=e,{user:y}=(0,p.A)(),{toast:g}=(0,h.dj)(),[v,b]=s.useState(!1),[w,N]=s.useState([]),[j,_]=s.useState(!0),[C,B]=s.useState(!1);s.useEffect(()=>{y&&(async()=>{_(!0);let e=new Set,r=[y.uid];for(let a of("admin"===y.role||"supervisor"===y.role||"coordinadora"===y.role?r=(await (0,x.GG)((0,x.rJ)(f.db,"users"))).docs.map(e=>e.id):"ejecutivo"===y.role&&y.visibilityGroup&&y.visibilityGroup.length>0&&(r=Array.from(new Set([y.uid,...y.visibilityGroup]))),r))try{let r=(0,x.rJ)(f.db,"users/".concat(a,"/consigneeDirectory"));(await (0,x.GG)(r)).forEach(r=>{let a=r.data();a.name&&e.add(a.name)})}catch(e){console.error("Error fetching directory for user ".concat(a,":"),e)}N(Array.from(e).sort((e,r)=>e.localeCompare(r)).map(e=>({value:e.toLowerCase(),label:e}))),_(!1)})()},[y]);let E=async()=>{if(!y||!r||r.trim().length<3)return void g({title:"No se puede guardar",description:"El nombre del consignatario debe tener al menos 3 caracteres.",variant:"destructive"});if(w.some(e=>e.label.toLowerCase()===r.trim().toLowerCase()))return void g({title:"Consignatario ya existe",description:"Este consignatario ya est\xe1 en un directorio compartido.",variant:"default"});B(!0);try{let e=(0,x.rJ)(f.db,"users/".concat(y.uid,"/consigneeDirectory"));await (0,x.gS)(e,{name:r.trim(),createdAt:(0,x.O5)()}),g({title:"Guardado",description:'"'.concat(r.trim(),'" ha sido a\xf1adido a su directorio personal.')});let a={value:r.trim().toLowerCase(),label:r.trim()};N(e=>[...e,a].sort((e,r)=>e.label.localeCompare(r.label)))}catch(e){console.error("Error saving consignee:",e),g({title:"Error",description:"No se pudo guardar el consignatario.",variant:"destructive"})}finally{B(!1)}};return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.$,{type:"button",variant:"outline",size:"icon",onClick:E,disabled:C,"aria-label":"Guardar consignatario en el directorio",children:C?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(n.A,{className:"h-4 w-4"})}),(0,t.jsxs)(m.AM,{open:v,onOpenChange:b,children:[(0,t.jsx)(m.Wv,{asChild:!0,children:(0,t.jsxs)(c.$,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between",children:[(0,t.jsx)("span",{className:"truncate",children:r||"Seleccionar o escribir..."}),(0,t.jsx)(i.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(m.hl,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(u.uB,{shouldFilter:!1,children:[(0,t.jsx)(u.G7,{placeholder:"Buscar o a\xf1adir consignatario...",value:r,onValueChange:a}),(0,t.jsxs)(u.oI,{children:[j&&(0,t.jsx)("div",{className:"py-6 text-center text-sm",children:"Cargando..."}),!j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.xL,{children:"No se encontr\xf3. Puede escribir y guardar."}),(0,t.jsx)(u.L$,{children:w.filter(e=>e.label.toLowerCase().includes(r.toLowerCase())).map(e=>(0,t.jsxs)(u.h_,{value:e.label,onSelect:t=>{a(t===r?"":e.label),b(!1)},children:[(0,t.jsx)(l.A,{className:(0,d.cn)("mr-2 h-4 w-4",r.toLowerCase()===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})]})]})})]})]})}},86501:(e,r,a)=>{a.d(r,{$:()=>t});class t extends Error{constructor(e,r){super("Firestore Permission Denied: You do not have permission to perform the '".concat(e.operation,"' operation on the path '").concat(e.path,"'.")),this.name="FirestorePermissionError",this.context=e,this.originalError=r,Object.setPrototypeOf(this,new.target.prototype)}}}}]);