"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4728],{9891:(e,a,r)=>{r.d(a,{d:()=>t});let t=new(r(65240)).EventEmitter},11186:(e,a,r)=>{r.d(a,{bq:()=>u,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>m});var t=r(95155),s=r(12115),o=r(47887),l=r(59007),n=r(42614),i=r(72251),d=r(64269);let c=o.bL;o.YJ;let m=o.WT,u=s.forwardRef((e,a)=>{let{className:r,children:s,...n}=e;return(0,t.jsxs)(o.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[s,(0,t.jsx)(o.In,{asChild:!0,children:(0,t.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=o.l9.displayName;let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=o.PP.displayName;let f=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=o.wn.displayName;let x=s.forwardRef((e,a)=>{let{className:r,children:s,position:l="popper",...n}=e;return(0,t.jsx)(o.ZL,{children:(0,t.jsxs)(o.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...n,children:[(0,t.jsx)(p,{}),(0,t.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(f,{})]})})});x.displayName=o.UC.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=o.JU.displayName;let h=s.forwardRef((e,a)=>{let{className:r,children:s,...l}=e;return(0,t.jsxs)(o.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(o.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),(0,t.jsx)(o.p4,{children:s})]})});h.displayName=o.q7.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=o.wv.displayName},27339:(e,a,r)=>{r.d(a,{l:()=>u});var t=r(95155),s=r(12115),o=r(5282),l=r(80160),n=r(28127),i=r(64269),d=r(3998),c=r(50276),m=r(26333);function u(e){let{className:a,date:r,onDateChange:u,disabled:p=!1}=e,[f,x]=s.useState(!1),[h,y]=s.useState(r);return s.useEffect(()=>{y(r)},[r]),(0,t.jsx)("div",{className:(0,i.cn)("grid gap-2",a),children:(0,t.jsxs)(m.AM,{open:f,onOpenChange:x,children:[(0,t.jsx)(m.Wv,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",disabled:p,className:(0,i.cn)("w-[180px] justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"}),h?(0,o.GP)(h,"dd/MM/yy",{locale:l.es}):(0,t.jsx)("span",{children:"Seleccione fecha"})]})}),(0,t.jsx)(m.hl,{className:"w-auto p-0",children:(0,t.jsx)(c.V,{mode:"single",selected:null!=h?h:void 0,onSelect:e=>{y(e),u(e),x(!1)},initialFocus:!0,locale:l.es,disabled:p})})]})})}},31120:(e,a,r)=>{r.d(a,{T:()=>l});var t=r(95155),s=r(12115),o=r(64269);let l=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...s})});l.displayName="Textarea"},41052:(e,a,r)=>{r.d(a,{C5:()=>y,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>d,zB:()=>m});var t=r(95155),s=r(12115),o=r(32467),l=r(22544),n=r(64269),i=r(76444);let d=l.Op,c=s.createContext({}),m=e=>{let{...a}=e;return(0,t.jsx)(c.Provider,{value:{name:a.name},children:(0,t.jsx)(l.xI,{...a})})},u=()=>{let e=s.useContext(c),a=s.useContext(p),{getFieldState:r,formState:t}=(0,l.xW)(),o=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=a;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...o}},p=s.createContext({}),f=s.forwardRef((e,a)=>{let{className:r,...o}=e,l=s.useId();return(0,t.jsx)(p.Provider,{value:{id:l},children:(0,t.jsx)("div",{ref:a,className:(0,n.cn)("space-y-2",r),...o})})});f.displayName="FormItem";let x=s.forwardRef((e,a)=>{let{className:r,...s}=e,{error:o,formItemId:l}=u();return(0,t.jsx)(i.J,{ref:a,className:(0,n.cn)(o&&"text-destructive",r),htmlFor:l,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,a)=>{let{...r}=e,{error:s,formItemId:l,formDescriptionId:n,formMessageId:i}=u();return(0,t.jsx)(o.DX,{ref:a,id:l,"aria-describedby":s?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!s,...r})});h.displayName="FormControl",s.forwardRef((e,a)=>{let{className:r,...s}=e,{formDescriptionId:o}=u();return(0,t.jsx)("p",{ref:a,id:o,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})}).displayName="FormDescription";let y=s.forwardRef((e,a)=>{var r;let{className:s,children:o,...l}=e,{error:i,formMessageId:d}=u(),c=i?String(null!=(r=null==i?void 0:i.message)?r:""):o;return c?(0,t.jsx)("p",{ref:a,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",s),...l,children:c}):null});y.displayName="FormMessage"},50276:(e,a,r)=>{r.d(a,{V:()=>d});var t=r(95155);r(12115);var s=r(51190),o=r(63263),l=r(75196),n=r(64269),i=r(3998);function d(e){let{className:a,classNames:r,showOutsideDays:d=!0,...c}=e;return(0,t.jsx)(l.hv,{showOutsideDays:d,className:(0,n.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,i.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,i.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:a,...r}=e;return(0,t.jsx)(s.A,{className:(0,n.cn)("h-4 w-4",a),...r})},IconRight:e=>{let{className:a,...r}=e;return(0,t.jsx)(o.A,{className:(0,n.cn)("h-4 w-4",a),...r})}},...c})}d.displayName="Calendar"},63817:(e,a,r)=>{r.d(a,{G7:()=>d,L$:()=>u,h_:()=>p,oI:()=>c,uB:()=>i,xL:()=>m});var t=r(95155),s=r(12115),o=r(41808),l=r(90109),n=r(64269);r(51834);let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.uB,{ref:a,className:(0,n.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...s})});i.displayName=o.uB.displayName;let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(l.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(o.uB.Input,{ref:a,className:(0,n.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...s})]})});d.displayName=o.uB.Input.displayName;let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.uB.List,{ref:a,className:(0,n.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...s})});c.displayName=o.uB.List.displayName;let m=s.forwardRef((e,a)=>(0,t.jsx)(o.uB.Empty,{ref:a,className:"py-6 text-center text-sm",...e}));m.displayName=o.uB.Empty.displayName;let u=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.uB.Group,{ref:a,className:(0,n.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...s})});u.displayName=o.uB.Group.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.uB.Separator,{ref:a,className:(0,n.cn)("-mx-1 h-px bg-border",r),...s})}).displayName=o.uB.Separator.displayName;let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.uB.Item,{ref:a,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50",r),...s})});p.displayName=o.uB.Item.displayName},76444:(e,a,r)=>{r.d(a,{J:()=>d});var t=r(95155),s=r(12115),o=r(10489),l=r(83101),n=r(64269);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(o.b,{ref:a,className:(0,n.cn)(i(),r),...s})});d.displayName=o.b.displayName},79505:(e,a,r)=>{r.d(a,{d:()=>y});var t=r(95155),s=r(12115),o=r(92033),l=r(73180),n=r(30848),i=r(72251),d=r(64269),c=r(3998),m=r(63817),u=r(26333),p=r(54901),f=r(14585),x=r(19708),h=r(15894);function y(e){let{value:a,onChange:r}=e,{user:y}=(0,p.A)(),{toast:g}=(0,h.dj)(),[b,w]=s.useState(!1),[v,N]=s.useState([]),[j,C]=s.useState(!0),[_,R]=s.useState(!1);s.useEffect(()=>{y&&(async()=>{C(!0);let e=new Set,a=[y.uid];for(let r of("admin"===y.role||"supervisor"===y.role||"coordinadora"===y.role?a=(await (0,x.GG)((0,x.rJ)(f.db,"users"))).docs.map(e=>e.id):"ejecutivo"===y.role&&y.visibilityGroup&&y.visibilityGroup.length>0&&(a=Array.from(new Set([y.uid,...y.visibilityGroup]))),a))try{let a=(0,x.rJ)(f.db,"users/".concat(r,"/consigneeDirectory"));(await (0,x.GG)(a)).forEach(a=>{let r=a.data();r.name&&e.add(r.name)})}catch(e){console.error("Error fetching directory for user ".concat(r,":"),e)}N(Array.from(e).sort((e,a)=>e.localeCompare(a)).map(e=>({value:e.toLowerCase(),label:e}))),C(!1)})()},[y]);let A=async()=>{if(!y||!a||a.trim().length<3)return void g({title:"No se puede guardar",description:"El nombre del consignatario debe tener al menos 3 caracteres.",variant:"destructive"});if(v.some(e=>e.label.toLowerCase()===a.trim().toLowerCase()))return void g({title:"Consignatario ya existe",description:"Este consignatario ya est\xe1 en un directorio compartido.",variant:"default"});R(!0);try{let e=(0,x.rJ)(f.db,"users/".concat(y.uid,"/consigneeDirectory"));await (0,x.gS)(e,{name:a.trim(),createdAt:(0,x.O5)()}),g({title:"Guardado",description:'"'.concat(a.trim(),'" ha sido a\xf1adido a su directorio personal.')});let r={value:a.trim().toLowerCase(),label:a.trim()};N(e=>[...e,r].sort((e,a)=>e.label.localeCompare(a.label)))}catch(e){console.error("Error saving consignee:",e),g({title:"Error",description:"No se pudo guardar el consignatario.",variant:"destructive"})}finally{R(!1)}};return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.$,{type:"button",variant:"outline",size:"icon",onClick:A,disabled:_,"aria-label":"Guardar consignatario en el directorio",children:_?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(l.A,{className:"h-4 w-4"})}),(0,t.jsxs)(u.AM,{open:b,onOpenChange:w,children:[(0,t.jsx)(u.Wv,{asChild:!0,children:(0,t.jsxs)(c.$,{variant:"outline",role:"combobox","aria-expanded":b,className:"w-full justify-between",children:[(0,t.jsx)("span",{className:"truncate",children:a||"Seleccionar o escribir..."}),(0,t.jsx)(n.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(u.hl,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(m.uB,{shouldFilter:!1,children:[(0,t.jsx)(m.G7,{placeholder:"Buscar o a\xf1adir consignatario...",value:a,onValueChange:r}),(0,t.jsxs)(m.oI,{children:[j&&(0,t.jsx)("div",{className:"py-6 text-center text-sm",children:"Cargando..."}),!j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.xL,{children:"No se encontr\xf3. Puede escribir y guardar."}),(0,t.jsx)(m.L$,{children:v.filter(e=>e.label.toLowerCase().includes(a.toLowerCase())).map(e=>(0,t.jsxs)(m.h_,{value:e.label,onSelect:t=>{r(t===a?"":e.label),w(!1)},children:[(0,t.jsx)(i.A,{className:(0,d.cn)("mr-2 h-4 w-4",a.toLowerCase()===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})]})]})})]})]})}},86501:(e,a,r)=>{r.d(a,{$:()=>t});class t extends Error{constructor(e,a){super("Firestore Permission Denied: You do not have permission to perform the '".concat(e.operation,"' operation on the path '").concat(e.path,"'.")),this.name="FirestorePermissionError",this.context=e,this.originalError=a,Object.setPrototypeOf(this,new.target.prototype)}}}}]);